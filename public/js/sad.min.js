!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SAD={})}(this,(function(e){"use strict";const t="1.6.1",n="AdsgramError",r={onBannerNotFound:400};function i(e){return e instanceof Error?e.message.replace(/^\w*Error: /,""):"string"==typeof e?e:""}const a={ru:"Упс! В данный момент нет доступной рекламы. Попробуйте ещё раз чуть позже 🙏",en:"Oops! No ads available at the moment. Try again later 🙏"},o={ru:"Упс! Вы слишком часто пытаетесь посмотреть рекламу. Попробуйте через несколько секунд 🙏",en:"Oops! You are trying to watch ads too often. Try it in a few seconds 🙏"},s={ru:"Упс! Сессия слишком долгая. Пожалуйста, перезапустите приложение, чтобы получать рекламу 🙏",en:"Oops! Your session is too long. Please, restart the app to get ads 🙏"},c={RewardedVideo:"RewardedVideo",FullscreenMedia:"FullscreenMedia",RewardTask:"RewardTask"},l={RewardBlock:"RewardBlock",InterstitialFullscreen:"InterstitialFullscreen",TaskBlock:"TaskBlock"},d=["int-","task-"],u={[l.RewardBlock]:"",[l.InterstitialFullscreen]:"int-",[l.TaskBlock]:"task-"},p={[l.RewardBlock]:"Reward",[l.InterstitialFullscreen]:"Interstitial",[l.TaskBlock]:"Task"},_=1e3,h=60,m=60,f=100,g=16;class b extends Error{constructor(e,t,n){super(t,{cause:n}),this.type=e,Object.setPrototypeOf(this,b.prototype)}}function v(e,t,n){return new b(e,t,n)}const y="ERR_UNKNOWN_ENV",w="ERR_TIMED_OUT",k="ERR_UNEXPECTED_TYPE",x="ERR_PARSE";class E{constructor(e,t,n){this.parser=e,this.isOptional=t,this.type=n}parse(e){if(!this.isOptional||void 0!==e)try{return this.parser(e)}catch(t){throw v(x,"Unable to parse value"+(this.type?` as ${this.type}`:""),t)}}optional(){return this.isOptional=!0,this}required(){return this.isOptional=!1,this}}function T(e,t){return()=>new E(e,!1,t)}function A(){return v(k,"Value has unexpected type")}const P=T((e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e);if(!Number.isNaN(t))return t}throw A()}),"number"),C=T((e=>e instanceof Date?e:new Date(P().parse(e)*_)),"Date");function N(e,t){const n={};for(const i in e){const a=e[i];if(!a)continue;let o,s;if("function"==typeof a||"parse"in a)o=i,s="function"==typeof a?a:a.parse.bind(a);else{const{type:e}=a;o=a.from||i,s="function"==typeof e?e:e.parse.bind(e)}try{const e=s(t(o));void 0!==e&&(n[i]=e)}catch(r){throw v(x,`Unable to parse field "${i}"`,r)}}return n}function S(e,t){return new E((t=>{if("string"!=typeof t&&!(t instanceof URLSearchParams))throw A();const n="string"==typeof t?new URLSearchParams(t):t;return N(e,(e=>n.get(e)??void 0))}),!1,t)}const I=T((e=>{if("string"==typeof e||"number"==typeof e)return e.toString();throw A()}),"string");function R(e){let t=e;if("string"==typeof t&&(t=JSON.parse(t)),"object"!=typeof t||null===t||Array.isArray(t))throw A();return t}function V(e,t){return new E((t=>{const n=R(t);return N(e,(e=>n[e]))}),!1,t)}const L=V({id:P(),type:I(),title:I(),photoUrl:{type:I().optional(),from:"photo_url"},username:I().optional()},"Chat").optional(),F=T((e=>{if("boolean"==typeof e)return e;const t=String(e);if("1"===t||"true"===t)return!0;if("0"===t||"false"===t)return!1;throw A()}),"boolean"),D={addedToAttachmentMenu:{type:F().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:F().optional(),from:"allows_write_to_pm"},firstName:{type:I(),from:"first_name"},id:P(),isBot:{type:F().optional(),from:"is_bot"},isPremium:{type:F().optional(),from:"is_premium"},languageCode:{type:I().optional(),from:"language_code"},lastName:{type:I().optional(),from:"last_name"},photoUrl:{type:I().optional(),from:"photo_url"},username:I().optional()},O=V(D,"User").optional(),B=V(D,"User").required();function U(){return S({authDate:{type:C(),from:"auth_date"},canSendAfter:{type:P().optional(),from:"can_send_after"},chat:L,chatInstance:{type:I().optional(),from:"chat_instance"},chatType:{type:I().optional(),from:"chat_type"},hash:I(),signature:I(),queryId:{type:I().optional(),from:"query_id"},receiver:O,startParam:{type:I().optional(),from:"start_param"},user:B},"InitData")}function M(e){const t=e.replace(/\s/g,"").toLowerCase();if(function(e){return/^#[\da-f]{6}$/i.test(e)}(t))return t;if(function(e){return/^#[\da-f]{3}$/i.test(e)}(t)){const e=3,n=2;let r="#";for(let i=0;i<e;i+=1)r+=t[1+i].repeat(n);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce(((e,t)=>{const n=Number.parseInt(t,10).toString(g);return e+(1===n.length?"0":"")+n}),"#")}const j=T((e=>M(I().parse(e))),"rgb");const z=T((e=>{const t=j().optional();return Object.entries(R(e)).reduce(((e,[n,r])=>{var i;return e[(i=n,i.replace(/_[a-z]/g,(e=>e[1].toUpperCase())))]=t.parse(r),e}),{})}),"ThemeParams");function W(e){return z().parse(e)}function $(){return function(e){if(!e)throw new Error("No telegram initParams in storage");const{tgWebAppData:t,tgWebAppVersion:n,tgWebAppPlatform:r,tgWebAppThemeParams:i,tgWebAppBotInline:a,tgWebAppShowSettings:o,tgWebAppStartParam:s}=e;return{botInline:Boolean(Number(a)),initData:(c=t,U().parse(c)),initDataRaw:t,showSettings:Boolean(Number(o)),startParam:s,themeParams:W(i),version:n,platform:r};var c}(function(e){const t=sessionStorage.getItem(function(e){return`__telegram__${e}`}(e));try{return t?JSON.parse(t):void 0}catch{}}("initParams"))}function q(e){return S({botInline:{type:F().optional(),from:"tgWebAppBotInline"},initData:{type:U(),from:"tgWebAppData"},initDataRaw:{type:I().optional(),from:"tgWebAppData"},platform:{type:I(),from:"tgWebAppPlatform"},showSettings:{type:F().optional(),from:"tgWebAppShowSettings"},startParam:{type:I().optional(),from:"tgWebAppStartParam"},themeParams:{type:z(),from:"tgWebAppThemeParams"},version:{type:I(),from:"tgWebAppVersion"}}).parse(e)}function H(e){return q(e.replace(/^[^#?]*[#?]/,"").replace(/[#?]/g,"&"))}function X(){return H(window.location.href)}function G(){const e=performance.getEntriesByType("navigation")[0];if(!e)throw new Error("Unable to get first navigation entry.");return H(e.name)}function J(){return q(JSON.parse(sessionStorage.getItem("tma.js/launch-params")??sessionStorage.getItem("tapps/launchParams")??sessionStorage.getItem("telegram-apps/launch-params")??sessionStorage.getItem("adsgram/launch-params")??""))}function Y(){for(const e of[X,G,$,J])try{return e()}catch{}}function Z(){return Y()?.initData.user}function K(){return Z()?.languageCode??window.navigator.language}function Q(e){const t=K();return t in e?e[t]:e.en}const ee={[c.RewardedVideo]:"104",[c.FullscreenMedia]:"511",[c.RewardTask]:"32265"},te=c.RewardedVideo,ne={noBannerToShowError:{description:Q(a),state:"load",error:!1,done:!1},duplicateShowError:{description:"Attempt to call show when an ad is being shown",state:"playing",error:!0,done:!1},renderError:{description:"Error during render ad",state:"render",error:!0,done:!1},playError:{description:"Error during playing ad",state:"playing",error:!0,done:!1},skip:{description:"The banner was skipped",state:"playing",error:!1,done:!1},reward:{description:"The banner was viewed to the end",state:"destroy",error:!1,done:!0},complete:{description:"The interstitial banner was viewed to the end or closed",state:"destroy",error:!1,done:!0},noBannerDataError:{description:"No banner data to show",state:"load",error:!1,done:!1},nonStopShowError:{description:"The user is trying to watch several ads in a row.",state:"load",error:!0,done:!1},notSuitable:{description:Q({ru:"Антифрод: подозрительная активность, награда не засчитана.",en:"Anti-fraud: suspicious activity, the reward is not counted."}),state:"destroy",error:!1,done:!0}};function re(e){return{state:"load",description:e,error:!0,done:!1}}const ie=0;function ae(e,t,n=ie){return new Promise(((r,i)=>{const a=function(o){fetch(e,t).then((e=>{r(e)})).catch((e=>{o<n?a(++o):i(e)}))};a(0)}))}const oe=se;function se(e,t){const n=ce();return(se=function(e,t){return n[e-=484]})(e,t)}function ce(){const e=["enc","977163JQAscQ","ODCYRYC","QTMmO","dec","323754YGqhaD","709200CSynhq","3735369IIkDKj","KLMNOPQRST","repeat","UVWXYZabcd","440888igXCEf","24CjRkBv","length","tjiLe","377744tmqNTQ","10IbbOqq","slice","16TWwstu","GjmTO","pWBaR","indexOf","ceil","fIknj","efghijklmn","LZnAX","17106bpfrqD","RyRPR","60ZUzdMg","750TrjOGc"];return(ce=function(){return e})()}function le(e,t=oe(499)){const n=oe,r={};r[n(498)]="ABCDEFGHIJ"+n(503)+n(505)+n(489)+"opqrstuvwxyz0123456789",r[n(484)]=n(497),r.wBgti=function(e,t){return e/t},r[n(488)]=function(e,t){return e===t},r[n(509)]=n(495),r[n(490)]=function(e,t){return e+t},r[n(492)]=function(e,t){return e-t},r[n(485)]=function(e,t){return e%t};const i=r,a=i[n(498)],o=i[n(484)],s=o[n(504)](Math[n(487)](i.wBgti(e[n(508)],o[n(508)])))[n(512)](0,e[n(508)]);let c="";for(let l=0;l<e[n(508)];l++){const r=a[n(486)](e[l]);if(-1===r)c+=e[l];else{const e=a[n(486)](s[l]),o=i[n(488)](t,i[n(509)])?i[n(490)](r,e):i[n(492)](r,e)+a[n(508)];c+=a[i[n(485)](o,a[n(508)])]}}return c}!function(e,t){const n=se,r=e();for(;;)try{if(245242===parseInt(n(510))/1+-parseInt(n(501))/2+-parseInt(n(500))/3*(-parseInt(n(513))/4)+-parseInt(n(494))/5*(parseInt(n(491))/6)+parseInt(n(506))/7*(parseInt(n(507))/8)+-parseInt(n(502))/9*(parseInt(n(511))/10)+parseInt(n(496))/11*(parseInt(n(493))/12))break;r.push(r.shift())}catch(i){r.push(r.shift())}}(ce);const de=ue;function ue(e,t){const n=pe();return(ue=function(e,t){return n[e-=493]})(e,t)}function pe(){const e=["4NAdDjnegR","310512VnowJi","from","charCodeAt","join","padStart","encode","QIaqR","importKey","now","3Ndhbyv","aeFQN","22WZdzAM","VPCa","4822415WSHKSw","zMBww","GdJfd","9gowVsX","hash","raw","gKC-JT8","sign","bXvxdAvKeE","b2YZDyOhZ1","floor","toString","4482740GcrumO","451998VcXucu","subtle","12Wiupgt","99954BWeTyB","21LkiqQu","Axgas","map","4401476uopNYm","2018888ofGxey"];return(pe=function(){return e})()}!function(e,t){const n=ue,r=e();for(;;)try{if(713944===-parseInt(n(505))/1*(-parseInt(n(504))/2)+parseInt(n(521))/3*(parseInt(n(509))/4)+-parseInt(n(525))/5+parseInt(n(502))/6*(parseInt(n(506))/7)+-parseInt(n(510))/8*(-parseInt(n(528))/9)+-parseInt(n(501))/10+parseInt(n(523))/11*(-parseInt(n(512))/12))break;r.push(r.shift())}catch(i){r.push(r.shift())}}(pe);const _e=le(de(511)+de(498)+de(497)+"gy"),he=3600,me=256,fe=le(de(524)),ge=le(de(495)),be=Uint8Array[de(513)](_e,(e=>e[de(514)](0)));let ve=0;const ye=e=>[...new Uint8Array(e)].map((e=>e[de(500)](g)[de(516)](2,"0")))[de(515)]("");async function we(e){const t=de,n={Axgas:t(494),QIaqR:function(e,t){return e(t)}},r=function(){const e=de,t={};t[e(526)]=function(e,t){return e/t},t[e(527)]=function(e,t){return e%t},t[e(522)]=function(e,t){return e+t};const n=t,r=Math[e(499)](Date[e(520)]()/_);ve=Math[e(499)](n.zMBww(r,he));const i=be[e(508)](((e,t)=>e^(ve+t)%me));return ve=n[e(527)](n[e(522)](ve,1),me),i}(),i={};i.name=fe,i[t(493)]=ge;const a=await crypto[t(503)][t(519)](n[t(507)],r,i,!1,["sign"]),o=new TextEncoder,s=await crypto[t(503)][t(496)](fe,a,o[t(517)](e));return n[t(518)](ye,s)}!function(e,t){const n=xe,r=e();for(;;)try{if(594113===parseInt(n(211))/1+-parseInt(n(209))/2+parseInt(n(205))/3+parseInt(n(202))/4+parseInt(n(215))/5*(-parseInt(n(207))/6)+-parseInt(n(201))/7+parseInt(n(210))/8)break;r.push(r.shift())}catch(i){r.push(r.shift())}}(Ee);const ke=3;function xe(e,t){const n=Ee();return(xe=function(e,t){return n[e-=201]})(e,t)}function Ee(){const e=["append","1721880feZTCc","IMMDx","42XDxQfC","5dy","2330780VWvgpK","9134056ixOvNr","836614wVVhtQ","alues","searchPara","5hsIvGv_lf","638870AAefUB","NdgDY","EkYfO","1673021gACzMw","1362372DrEwVO","toString"];return(Ee=function(){return e})()}const Te="https://api.adsgram.ai/";class Ae extends Error{message;code;constructor({message:e,shouldLog:t=!0,code:r=100}){super(e),this.name=n,this.message=`${n}: ${e}`,this.code=r,t&&this.logError(e)}}const Pe=64,Ce=256,Ne=3;function Se(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ie(e,t){return function(e,t){const n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length);for(let a=0;a<i;a+=1){const e=Number.parseInt(n[a]||"0",10),t=Number.parseInt(r[a]||"0",10);if(e!==t)return e>t?1:-1}return 0}(e,t)<=0}function Re(e,t,n){if("string"==typeof n){if("web_app_open_link"===e&&"try_instant_view"===t)return Ie("6.4",n);if("web_app_set_header_color"===e&&"color"===t)return Ie("6.9",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return Ie("6.1",t);case"web_app_open_popup":return Ie("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return Ie("6.4",t);case"web_app_switch_inline_query":return Ie("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return Ie("6.9",t);case"web_app_setup_settings_button":return Ie("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return Ie("7.2",t);case"web_app_setup_swipe_behavior":return Ie("7.7",t);case"web_app_share_to_story":return Ie("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return Ie("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_start_accelerometer":case"web_app_stop_accelerometer":case"web_app_start_device_orientation":case"web_app_stop_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_gyroscope":return Ie("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}const Ve="web.telegram.org",Le=e=>e.toLowerCase().startsWith("https://")?new URL(e).hostname:e,Fe=(e=!0)=>{const t=window.location.ancestorOrigins;if(t?.length){const n=Le(t[t.length-1]);return n===Ve&&e?t.length>1?Le(t[t.length-2]):window.location.hostname:n}try{const e=window.top.location.hostname;if(e)return e}catch{}return window.location.hostname};function De(){return function(){try{return window.self!==window.top}catch{return!0}}()&&Fe(!1)===Ve}let Oe=`https://${Ve}`;function Be(){return Oe}function Ue(e,t,n){let r,i={};void 0===t&&void 0===n?i={}:void 0!==t&&void 0!==n?(i=n,r=t):void 0!==t&&("targetOrigin"in t?i=t:r=t);const{targetOrigin:a=Be()}=i;var o;if("external"in(o=window)&&Se(o.external)&&"notify"in o.external&&"function"==typeof o.external.notify)window.external.notify(JSON.stringify({eventType:e,eventData:r}));else if(function(e){return"TelegramWebviewProxy"in e&&Se(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&"function"==typeof e.TelegramWebviewProxy.postEvent}(window))window.TelegramWebviewProxy.postEvent(e,JSON.stringify(r));else{if(!De())throw v(y,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside of Telegram application environment.");window.parent.postMessage(JSON.stringify({eventType:e,eventData:r}),a)}}const Me="0.0";function je(){return Y()?.version??Me}const ze=(We=je(),(e,t)=>{if(!Re(e,We))throw v("ERR_METHOD_UNSUPPORTED",`Method "${e}" is unsupported in Mini Apps version ${We}`);if(Se(t)){let n;if("web_app_open_link"===e&&"try_instant_view"in t?n="try_instant_view":"web_app_set_header_color"===e&&"color"in t&&(n="color"),n&&!Re(e,n,We))throw v("ERR_METHOD_PARAMETER_UNSUPPORTED",`Parameter "${n}" of "${e}" method is unsupported in Mini Apps version ${We}`)}return Ue(e,t)});var We;function $e(e){try{ze("web_app_open_popup",function(e){const t=e.message.trim(),n=(e.title??"").trim(),r=e.buttons||[];if(n.length>Pe)throw new Error(`Title has incorrect size: ${n.length}`);if(0===t.length||t.length>Ce)throw new Error(`Message has incorrect size: ${t.length}`);if(r.length>Ne)throw new Error(`Buttons have incorrect size: ${r.length}`);return{title:n,message:t,buttons:0===r.length?[{type:"close",id:""}]:r.map((e=>{const{id:t=""}=e;if(t.length>Pe)throw new Error(`Button ID has incorrect size: ${t}`);if(!e.type||"default"===e.type||"destructive"===e.type){const n=e.text.trim();if(0===n.length||n.length>Pe){const t=e.type??"default";throw new Error(`Button text with type "${t}" has incorrect size: ${e.text.length}`)}return{...e,text:n,id:t}}return{...e,id:t}}))}}(e))}catch{alert(e.message)}}class qe extends Ae{logError(e){$e({title:"AdsgramError",message:e.length<Ce?e:e.slice(0,Ce-1)}),console.error(this)}}const He=(e,t)=>{if(!function(e){return"string"==typeof e&&Object.keys(l).includes(e)}(e))throw new qe({message:"Wrong blockType from Backend"});{const n=u[e],r=t.match(/^(\D*)\d+$/)?.[1];if(n!==r)throw new qe(""===r?{message:`BlockId that you pass should starts with ${n}`}:{message:`BlockId that you pass has block type = "${p[e]}", but you try to use it with wrong prefix = "${r}".\nCreate block with correct type or change prefix.`})}return!0};function Xe(e,t){if(!e)return"";const n=new URLSearchParams(e),r=new Set(["hash","signature"]),i=[];for(const[o,s]of n)r.has(o)||i.push(`${o}=${s}`);i.sort(new Intl.Collator("en").compare);const a=i.join("\n");try{return function(e){const t=(new TextEncoder).encode(e),n=String.fromCodePoint(...t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(a)}catch{return t?.(a),""}}function Ge(e){for(const t of d)if(e.startsWith(t))return e.replace(t,"");return e}function Je(){return Y()?.platform}const Ye=["blockId","campaignId","environment"],Ze=({app:e,type:t,event:n,data:r})=>{const i={app:e,type:t,event:n};return r&&(i.data=JSON.stringify(((e,t)=>{const n=[],r=[];for(const[a,o]of Object.entries(t)){const t=e.indexOf(a);-1===t?n.push([a,o]):r[t]=[a,o]}const i=[...n,...r.filter(Boolean)];return Object.fromEntries(i)})(Ye,r))),new URLSearchParams(i)};class Ke{apiUrl;app;data;constructor(e,t){return this.app=e,this.apiUrl=t,this.data={},this}getData(){return this.data}add(e,t){return(e=>{if(null==e||""===e)return!0;if("object"==typeof e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1})(t)||(this.data[e]=t),this}addError(e){return this.data.error=function(e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:String(e)}(e),this}clean(){return this.data={},this}send(e,t="ERROR"){ae(`${this.getSendUrl(e,t)}`,{method:"GET",cache:"no-cache"}).then((()=>!0)).catch((()=>!1))}getLogRequestData(e,t){return{app:this.app,type:t,event:e,data:{...this.data}}}getSendUrl(e,t){return`${this.apiUrl}?${Ze(this.getLogRequestData(e,t))}`}}const Qe="frontend-error";function et(){const e=new Ke("SAD",`${Te}${Qe}`),t=function(){try{return{tg_id:String(Z()?.id),tg_platform:Je(),platform:window.navigator.platform,userAgent:window.navigator.userAgent,origin:window.location.origin,top_domain:Fe(),lib_version:window.Adsgram.init?.version,tma_version:Y()?.version}}catch{return null}}();return t&&e.add("environment",t),e}const tt=.299,nt=.587,rt=.114,it=2,at=120;function ot(){const e=function(){const e=Y()?.themeParams;return e}()?.bgColor;return!!e&&function(e){const t=M(e);return Math.sqrt([tt,nt,rt].reduce(((e,n,r)=>{const i=Number.parseInt(t.slice(1+r*it,1+(r+1)*it),16);return e+i*i*n}),0))<at}(e)}const st=1e4,ct=200;function lt(e){return!!e?.top}function dt(...e){let t=!1;const n=[...e];return[e=>!t&&n.push(e),()=>{if(!t){t=!0;for(const e of n)e()}},t]}function ut(e,t){return Promise.race(["function"==typeof e?e():e,new Promise(((e,n)=>{setTimeout((()=>{n(function(e){return v(w,`Timeout reached: ${e}ms`)}(t))}),t)}))])}const pt=Object.keys;class _t{listeners;emittedEvents;AdsgramError;allowedEvents;constructor(e,t){this.listeners=[],this.emittedEvents=new Set,this.AdsgramError=e,this.allowedEvents=new Set(t)}on(e,t,n){if("function"!=typeof t)throw new this.AdsgramError({message:"The listener argument must be of type Function. Received type "+typeof t,shouldLog:!1});if(!e)throw new this.AdsgramError({message:"The event argument must be of type String. Received type "+typeof e,shouldLog:!1});if(this.allowedEvents.size>0&&!this.allowedEvents.has(e))throw new this.AdsgramError({message:`The event argument must be one of ${[...this.allowedEvents].join(", ")}. Received ${e}`,shouldLog:!1});return this.listeners.push({event:e,listener:t,options:n}),()=>{this.off(e,t,n)}}off(e,t,n){this.listeners=this.listeners.filter((r=>{return r.event!==e||r.listener!==t||(i=r.options,a=n,!(Se(i)&&Se(a)?Object.keys(i).length===Object.keys(a).length&&pt(i).every((e=>Object.prototype.hasOwnProperty.call(a,e)&&Object.is(i[e],a[e]))):Object.is(i,a)));var i,a}))}emit(e,t){if(Boolean(t?.once)&&this.emittedEvents.has(e))return!1;this.emittedEvents.add(e);let n=!1;const r=new Set,i=t&&"payload"in t?t.payload:[];for(const a of this.listeners)a.event===e&&(n=!0,a.listener(...i),a.options?.once&&r.add(a)),a.options?.unsubscribeEvent===e&&r.add(a);return r.size>0&&(this.listeners=this.listeners.filter((e=>!r.has(e)))),n}removeAllListeners(e){return e?(this.listeners=this.listeners.filter((t=>t.event!==e)),this):(this.listeners=[],this)}clearEmittedEvents(){this.emittedEvents.clear()}hasListeners(e){return this.listeners.some((({event:t})=>t===e))}get count(){return this.listeners.length}clear(){this.removeAllListeners(),this.clearEmittedEvents()}}function ht(e,t,n){return window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)}const mt={popup_closed:{parse:e=>V({button_id:e=>null==e?void 0:I().parse(e)}).parse(e??{})},theme_changed:V({theme_params:e=>{const t=j().optional();return Object.entries(R(e)).reduce(((e,[n,r])=>(e[n]=t.parse(r),e)),{})}}),viewport_changed:V({height:P(),width:e=>null==e?window.innerWidth:P().parse(e),is_state_stable:F(),is_expanded:F()})};function ft(e,t,n){try{const r=function(e,t){try{const n=mt[e];return n?n.parse(t):t}catch(n){throw v(x,"Unable to parse value"+(e&&"string"==typeof e?` as ${e}`:""),n)}}(t,n);r?e.emit(t,{payload:[r]}):e.emit(t)}catch{}}function gt(e,t,n){if(!Se(e))return!1;const r=[...t],i=r.pop();if(void 0===i)return!1;let a=e;return r.forEach((e=>{if(!Se(a))return!1;e in a||(a[e]={}),a=a[e]})),!!Se(a)&&(a[i]=n,!0)}function bt(e,t){const n=function(e,t){return t.reduce(((e,t)=>{if(Se(e)&&t in e)return e[t]}),e)}(window,t);return gt(window,t,((...t)=>{try{ft(e,...t)}catch{}"function"==typeof n&&n(...t)})),()=>{gt(window,t,n)}}function vt(e){const t=[];for(const n of[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]])t.push(bt(e,n));return t.push(ht("message",(t=>{if(t.source!==window.parent)return;let n;try{r=t.data,n=V({eventType:I(),eventData:e=>e}).parse(r)}catch{return}var r;try{const{eventType:t,eventData:r}=n;ft(e,t,r)}catch{}}))),()=>{t.forEach((e=>{e()}))}}const[yt,wt]=function(e,t){let n;const r=()=>{n&&t&&t(n),n=void 0};return[()=>n??(n=e(r)),r]}((e=>{const[t,n]=function(){const e=new _t(qe),t=vt(e),[,n]=dt(t,ht("resize",(()=>{e.emit("viewport_changed",{payload:[{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0}]})})),(()=>e.clear()));return[{on:e.on.bind(e),off:e.off.bind(e),get count(){return e.count}},n]}(),r=t.off.bind(t);return t.off=(n,i,a)=>{const{count:o}=t;r(n,i,a),o&&!t.count&&e()},[t,n]}),(([,e])=>e()));function kt(e,t,n){return yt()[0].on(e,t,{once:n})}async function xt(e){let t;const n=new Promise((e=>{t=e})),{event:r,capture:i,timeout:a=st}=e,[,o]=dt(...(Array.isArray(r)?r:[r]).map((e=>kt(e,(e=>(!i||i(e))&&t(e))))));try{return(e.postEvent||ze)(e.method,e.params),await(a?ut(n,a):n)}finally{o()}}const Et={top:0,bottom:0,left:0,right:0};async function Tt(e){return await xt({...e,method:"web_app_request_content_safe_area",event:"content_safe_area_changed"}).catch((()=>Et))}async function At(e={}){const{is_expanded:t,is_state_stable:n,...r}=await xt({...e,method:"web_app_request_viewport",event:"viewport_changed"});return{...r,isExpanded:t,isStateStable:n}}class Pt{_value;initValue;constructor(e){this._value=e,this.initValue=e}async getValue(e){if(this.guard(this._value))return{...this._value,isStarted:!0};const t=await this.requestParam(e);return this.reset(),this.guard(t)?{...t,isStarted:!1}:void 0}set value(e){this.guard(e)&&(this._value=e)}async reset(){try{await this.unsubscribe()}catch{}this._value=this.initValue}}const Ct={x:null,y:null,z:null};class Nt extends Pt{constructor(){super(Ct)}async requestParam(e){return await xt({...e,method:"web_app_start_accelerometer",event:["accelerometer_failed","accelerometer_changed"],params:{refresh_rate:20}}).catch((()=>null))}guard(e){return"object"==typeof e&&null!==e&&!("error"in e)&&"x"in e&&"y"in e&&"z"in e&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z}subscribe(){kt("accelerometer_changed",(e=>{this.value=e}))}async unsubscribe(){await xt({timeout:500,method:"web_app_stop_accelerometer",event:["accelerometer_failed","accelerometer_stopped"]}).catch((()=>null))}}const St={absolute:null,alpha:null,beta:null,gamma:null};class It extends Pt{constructor(){super(St)}async requestParam(e){return await xt({...e,method:"web_app_start_device_orientation",event:["device_orientation_failed","device_orientation_changed"],params:{refresh_rate:20}}).catch((()=>null))}guard(e){return"object"==typeof e&&null!==e&&!("error"in e)&&"alpha"in e&&"beta"in e&&"gamma"in e&&"number"==typeof e.alpha&&"number"==typeof e.beta&&"number"==typeof e.gamma}subscribe(){kt("device_orientation_changed",(e=>{this.value=e}))}async unsubscribe(){await xt({timeout:500,method:"web_app_stop_device_orientation",event:["device_orientation_failed","device_orientation_stopped"]}).catch((()=>null))}}const Rt={x:null,y:null,z:null};class Vt extends Pt{constructor(){super(Rt)}async requestParam(e){return await xt({...e,method:"web_app_start_gyroscope",event:["gyroscope_failed","gyroscope_changed"],params:{refresh_rate:20}}).catch((()=>null))}guard(e){return"object"==typeof e&&null!==e&&!("error"in e)&&"x"in e&&"y"in e&&"z"in e&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z}subscribe(){kt("gyroscope_changed",(e=>{this.value=e}))}async unsubscribe(){await xt({timeout:500,method:"web_app_stop_gyroscope",event:["gyroscope_failed","gyroscope_stopped"]}).catch((()=>null))}}class Lt{telegramParams;constructor(){this.telegramParams=[new Nt,new Vt,new It]}async requestParams(e){const[t,n,r]=await Promise.all(this.telegramParams.map((t=>t.getValue(e))));return{accelerometer:JSON.stringify(t),gyroscope:JSON.stringify(n),deviceOrientation:JSON.stringify(r)}}subscribe(){this.telegramParams.forEach((e=>e.subscribe()))}}let Ft;function Dt(){return Ft||(Ft=new Lt),Ft}function Ot(e){return Se(e)&&Object.keys(e).length>0}const Bt=(e,t)=>{if(Ot(e)){if(((e,t)=>"blockType"in e?(t.add("blockType",String(e.blockType)),!0):(t.add("BannerDataGuard","bannerData does not have blockType"),!1))(e,t)&&((e,t)=>!!Array.isArray(e.banners)||(t.add("BannerDataGuard","bannerData does not have banners"),!1))(e,t)&&((e,t)=>!!e.every((e=>Ot(e)&&"bannerType"in e))||(t.add("BannerDataGuard","some banners do not have bannerType"),!1))(e.banners,t)&&((e,t)=>{const n=e.find((e=>"string"!=typeof e.bannerType||!Object.keys(c).includes(e.bannerType)));return!n||(t.add("bannerType",String(n.bannerType)).add("BannerDataGuard","some banners have invalid bannerType"),!1)})(e.banners,t))return!0;t.send("WrongBannerData")}throw new qe({message:Q(a),shouldLog:!1,code:400})},Ut=e=>{const t={};for(const[n,r]of Object.entries(e))"object"==typeof r&&null!==r?t[n]=JSON.stringify(r):null!=r&&""!==r&&(t[n]=String(r));return new URLSearchParams(t)},Mt="adv";async function jt(e,n){const r=et();r.add("blockId",e),n&&r.add("isForceCampaign",!0).add("campaignId",Number(n));try{const i=function(e,n){const r=et();r.add("blockId",e).add("campaignId",n);const i=Y();if(!i)throw r.send("NoUserData","WARN"),new qe({message:"Unable to retrieve launch parameters from any known source. Try to open your app in Telegram environment"});try{const{initData:a,initDataRaw:o,platform:s}=i,{user:c,chat:l}=a,d=localStorage.getItem("ton-connect-ui_wallet-info")?"1":void 0,u=e=>r.add("dataCheckString",e).send("CannotGenerateDataCheckString");return{blockId:Ge(e),forceCampaignId:n,tg_id:String(c.id),tg_platform:s,platform:window.navigator.platform,language:c?.languageCode??window.navigator.language,is_premium:c?.isPremium,chat_type:a?.chatType,chat_instance:a?.chatInstance,attach_chat_type:l?.type,attach_chat_id:l?.id?String(l?.id):void 0,receiver_id:a?.receiver?.id?String(a?.receiver?.id):void 0,receiver_is_bot:a.receiver?.isBot,top_domain:Fe(),connectiontype:d,signature:a.signature,data_check_string:Xe(o,u),tma_version:je(),sdk_version:t}}catch(a){throw r.addError(a).send("CannotGetRequestData"),new qe({message:"Cannot get request data."})}}(e,n),a=await async function(){const e=Dt(),[{accelerometer:t,gyroscope:n,deviceOrientation:r},{height:i},a]=await Promise.all([e.requestParams({timeout:ct}),At({timeout:ct}).catch((()=>({height:null}))),Tt({timeout:ct})]),o={"X-Color-Scheme":ot()?"dark":"light","X-Is-Fullscreen":lt(a),"X-Accelerometer":t,"X-Gyroscope":n,"X-Device-Orientation":r,"X-Viewport-Height":i};return Object.fromEntries(Object.entries(o).filter((([,e])=>null!=e&&null!=e&&""!==e)).map((([e,t])=>[e,String(t)])))}(),o=await async function(e,t,n){const r=xe,i={EkYfO:r(214),NdgDY:function(e,t){return e(t)},IMMDx:r(208),UJdPH:function(e,t,n,r){return e(t,n,r)}},a=crypto["getRandomV"+r(212)](new Uint32Array(ke)).join(""),o=new URL(e);o[r(213)+"ms"].append(le(i[r(217)]),a);const s=await i[r(216)](we,o.searchParams[r(203)]());return o[r(213)+"ms"][r(204)](le(i[r(206)]),s),i.UJdPH(ae,o,t,n)}(`${Te}${Mt}?${Ut(i)}`,{method:"GET",cache:"no-cache",referrerPolicy:"strict-origin-when-cross-origin",headers:a},0);if(o.ok){const t=await o.json();return Bt(t,r),He(t.blockType,e),t}throw function(e,t,n){switch(e){case"Wrong referer":return n.send("WrongReferer","WARN"),new qe({message:`Platform App url for blockId = ${t} not equal to ${window.location.origin}\nCreate new platform with app url ${window.location.origin} and new blockId for this platform.`});case"Need to use active blockid":return n.send("BlockNotActive","WARN"),new qe({message:`Block ${t} is not active.\nChange status to active on https://partner.adsgram.ai/units/${t}/\nIf block has moderation status see https://docs.adsgram.ai/publisher/get-block-id#moderation`});case"Not found this id":return n.send("BlockNotFound","WARN"),new qe({message:`BlockId = ${t} is not found. Make sure that this is your blockId https://partner.adsgram.ai/units/${t}/`});case"Need to specify blockid":return n.send("NotPassBlock","WARN"),new qe({message:"You don't pass blockId to Init function"});case"No botId":return new qe({message:"Set BotId for your platform on https://partner.adsgram.ai"});case"Session too old":try{const e=Y(),t=e?.initDataRaw,r=Xe(t),i=e?.initData.signature;n.add("data_check_string",r).add("signature",i)}catch{}return n.send("SessionTooLong","WARN"),new qe({message:Q(s),shouldLog:!1});case"No available ad":return new qe({message:"There are currently no ads to display"});default:return n.add("resultError",e).send("UnexpectedResultError"),new qe({message:`Unexpected error: ${e}`,shouldLog:!1})}}((await o.json()).error,e,r)}catch(i){throw i instanceof qe||r.addError(i).send("APIFetchBannerDataError"),i}}const zt={load:"load",destroy:"destroy",finalDestroy:"finalDestroy",error:"error",renderError:"renderError",pause:"pause",play:"play",leave:"leave",return:"return",sendReward:"sendReward",showNextBanner:"showNextBanner",playerError:"playerError"},Wt={onReward:"onReward",onStart:"onStart",onSkip:"onSkip",onBannerNotFound:"onBannerNotFound",onError:"onError",onComplete:"onComplete",onNonStopShow:"onNonStopShow",onTooLongSession:"onTooLongSession"},$t={onNotSuitable:"onNotSuitable"},qt={...zt,...Wt,...$t,replay:"replay"},Ht=pt(qt);function Xt(e,t,n){e.on(zt.finalDestroy,(()=>t.forEach((e=>{try{e()}catch(t){n.addError(t).add("cleanupFn",e.name).send("CleanupError")}}))),{once:!0})}var Gt,Jt,Yt,Zt,Kt,Qt,en,tn,nn={},rn=[],an=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,on=Array.isArray;function sn(e,t){for(var n in t)e[n]=t[n];return e}function cn(e){var t=e.parentNode;t&&t.removeChild(e)}function ln(e,t,n){var r,i,a,o={};for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?Gt.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return dn(e,o,r,i,null)}function dn(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++Yt:i,__i:-1,__u:0};return null==i&&null!=Jt.vnode&&Jt.vnode(a),a}function un(e){return e.children}function pn(e,t){this.props=e,this.context=t}function _n(e,t){if(null==t)return e.__?_n(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?_n(e):null}function hn(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return hn(e)}}function mn(e){(!e.__d&&(e.__d=!0)&&Zt.push(e)&&!fn.__r++||Kt!==Jt.debounceRendering)&&((Kt=Jt.debounceRendering)||Qt)(fn)}function fn(){var e,t,n,r,i,a,o,s,c;for(Zt.sort(en);e=Zt.shift();)e.__d&&(t=Zt.length,r=void 0,a=(i=(n=e).__v).__e,s=[],c=[],(o=n.__P)&&((r=sn({},i)).__v=i.__v+1,Jt.vnode&&Jt.vnode(r),Tn(o,r,i,n.__n,void 0!==o.ownerSVGElement,32&i.__u?[a]:null,s,null==a?_n(i):a,!!(32&i.__u),c),r.__.__k[r.__i]=r,An(s,r,c),r.__e!=a&&hn(r)),Zt.length>t&&Zt.sort(en));fn.__r=0}function gn(e,t,n,r,i,a,o,s,c,l,d){var u,p,_,h,m,f=r&&r.__k||rn,g=t.length;for(n.__d=c,function(e,t,n){var r,i,a,o,s,c=t.length,l=n.length,d=l,u=0;for(e.__k=[],r=0;r<c;r++)null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?dn(null,i,null,null,i):on(i)?dn(un,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?dn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,s=yn(i,n,o=r+u,d),i.__i=s,a=null,-1!==s&&(d--,(a=n[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&u--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s===o+1?u++:s>o?d>c-o?u+=s-o:u--:u=s<o&&s==o-1?s-o:0,s!==r+u&&(i.__u|=65536))):(a=n[r])&&null==a.key&&a.__e&&(a.__e==e.__d&&(e.__d=_n(a)),Cn(a,a,!1),n[r]=null,d--);if(d)for(r=0;r<l;r++)null!=(a=n[r])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=_n(a)),Cn(a,a))}(n,t,f),c=n.__d,u=0;u<g;u++)null!=(_=n.__k[u])&&"boolean"!=typeof _&&"function"!=typeof _&&(p=-1===_.__i?nn:f[_.__i]||nn,_.__i=u,Tn(e,_,p,i,a,o,s,c,l,d),h=_.__e,_.ref&&p.ref!=_.ref&&(p.ref&&Pn(p.ref,null,_),d.push(_.ref,_.__c||h,_)),null==m&&null!=h&&(m=h),65536&_.__u||p.__k===_.__k?c=bn(_,c,e):"function"==typeof _.type&&void 0!==_.__d?c=_.__d:h&&(c=h.nextSibling),_.__d=void 0,_.__u&=-196609);n.__d=c,n.__e=m}function bn(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=bn(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function vn(e,t){return t=t||[],null==e||"boolean"==typeof e||(on(e)?e.some((function(e){vn(e,t)})):t.push(e)),t}function yn(e,t,n,r){var i=e.key,a=e.type,o=n-1,s=n+1,c=t[n];if(null===c||c&&i==c.key&&a===c.type)return n;if(r>(null!=c&&0==(131072&c.__u)?1:0))for(;o>=0||s<t.length;){if(o>=0){if((c=t[o])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(s<t.length){if((c=t[s])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return-1}function wn(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||an.test(t)?n:n+"px"}function kn(e,t,n,r,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||wn(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||wn(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,a?En:xn,a)):e.removeEventListener(t,a?En:xn,a);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(o){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function xn(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Jt.event?Jt.event(e):e)}function En(e){return this.l[e.type+!0](Jt.event?Jt.event(e):e)}function Tn(e,t,n,r,i,a,o,s,c,l){var d,u,p,_,h,m,f,g,b,v,y,w,k,x,E,T=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),a=[s=t.__e=n.__e]),(d=Jt.__b)&&d(t);e:if("function"==typeof T)try{if(g=t.props,b=(d=T.contextType)&&r[d.__c],v=d?b?b.props.value:d.__:r,n.__c?f=(u=t.__c=n.__c).__=u.__E:("prototype"in T&&T.prototype.render?t.__c=u=new T(g,v):(t.__c=u=new pn(g,v),u.constructor=T,u.render=Nn),b&&b.sub(u),u.props=g,u.state||(u.state={}),u.context=v,u.__n=r,p=u.__d=!0,u.__h=[],u._sb=[]),null==u.__s&&(u.__s=u.state),null!=T.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=sn({},u.__s)),sn(u.__s,T.getDerivedStateFromProps(g,u.__s))),_=u.props,h=u.state,u.__v=t,p)null==T.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==T.getDerivedStateFromProps&&g!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,v),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),y=0;y<u._sb.length;y++)u.__h.push(u._sb[y]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,v),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(_,h,m)}))}if(u.context=v,u.props=g,u.__P=e,u.__e=!1,w=Jt.__r,k=0,"prototype"in T&&T.prototype.render){for(u.state=u.__s,u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),x=0;x<u._sb.length;x++)u.__h.push(u._sb[x]);u._sb=[]}else do{u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++k<25);u.state=u.__s,null!=u.getChildContext&&(r=sn(sn({},r),u.getChildContext())),p||null==u.getSnapshotBeforeUpdate||(m=u.getSnapshotBeforeUpdate(_,h)),gn(e,on(E=null!=d&&d.type===un&&null==d.key?d.props.children:d)?E:[E],t,n,r,i,a,o,s,c,l),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),f&&(u.__E=u.__=null)}catch(A){t.__v=null,c||null!=a?(t.__e=s,t.__u|=c?160:32,a[a.indexOf(s)]=null):(t.__e=n.__e,t.__k=n.__k),Jt.__e(A,t,n)}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,a,o,s,c){var l,d,u,p,_,h,m,f=n.props,g=t.props,b=t.type;if("svg"===b&&(i=!0),null!=a)for(l=0;l<a.length;l++)if((_=a[l])&&"setAttribute"in _==!!b&&(b?_.localName===b:3===_.nodeType)){e=_,a[l]=null;break}if(null==e){if(null===b)return document.createTextNode(g);e=i?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,g.is&&g),a=null,s=!1}if(null===b)f===g||s&&e.data===g||(e.data=g);else{if(a=a&&Gt.call(e.childNodes),f=n.props||nn,!s&&null!=a)for(f={},l=0;l<e.attributes.length;l++)f[(_=e.attributes[l]).name]=_.value;for(l in f)_=f[l],"children"==l||("dangerouslySetInnerHTML"==l?u=_:"key"===l||l in g||kn(e,l,null,_,i));for(l in g)_=g[l],"children"==l?p=_:"dangerouslySetInnerHTML"==l?d=_:"value"==l?h=_:"checked"==l?m=_:"key"===l||s&&"function"!=typeof _||f[l]===_||kn(e,l,_,f[l],i);if(d)s||u&&(d.__html===u.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),gn(e,on(p)?p:[p],t,n,r,i&&"foreignObject"!==b,a,o,a?a[0]:n.__k&&_n(n,0),s,c),null!=a)for(l=a.length;l--;)null!=a[l]&&cn(a[l]);s||(l="value",void 0!==h&&(h!==e[l]||"progress"===b&&!h||"option"===b&&h!==f[l])&&kn(e,l,h,f[l],!1),l="checked",void 0!==m&&m!==e[l]&&kn(e,l,m,f[l],!1))}return e}(n.__e,t,n,r,i,a,o,c,l);(d=Jt.diffed)&&d(t)}function An(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Pn(n[r],n[++r],n[++r]);Jt.__c&&Jt.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(n){Jt.__e(n,t.__v)}}))}function Pn(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(r){Jt.__e(r,n)}}function Cn(e,t,n){var r,i;if(Jt.unmount&&Jt.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Pn(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Jt.__e(a,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Cn(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||cn(e.__e),e.__=e.__e=e.__d=void 0}function Nn(e,t,n){return this.constructor(e,n)}function Sn(e,t,n){var r,i,a,o;Jt.__&&Jt.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,a=[],o=[],Tn(t,e=(!r&&n||t).__k=ln(un,null,[e]),i||nn,nn,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?Gt.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r,o),An(a,e,o)}function In(e,t){var n={__c:t="__cC"+tn++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,mn(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}function Rn(e){if(!(e instanceof HTMLElement))throw new qe({message:`${e} cannot be used to display ads`});return!1}function Vn(e){let t=!1;const n=()=>{t=!0},r=()=>{t=!1},i=()=>{"visible"===document.visibilityState&&t&&e.emit(zt.return),"hidden"!==document.visibilityState||t||e.emit(zt.leave)},a=()=>{t&&e.emit(zt.return)};return e.on(zt.leave,n),e.on(zt.return,r),window.addEventListener("visibilitychange",i),window.addEventListener("focus",a),window.addEventListener("click",a),function(){window.removeEventListener("visibilitychange",i),window.removeEventListener("focus",a),window.removeEventListener("click",a),e.off(zt.leave,n),e.off(zt.return,r)}}Gt=rn.slice,Jt={__e:function(e,t,n,r){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(s){e=s}throw e}},Yt=0,pn.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=sn({},this.state),"function"==typeof e&&(e=e(sn({},n),this.props)),e&&sn(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),mn(this))},pn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),mn(this))},pn.prototype.render=un,Zt=[],Qt="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,en=function(e,t){return e.__v.__b-t.__v.__b},fn.__r=0,tn=0;const Ln=new Set(["RewardedVideo","FullscreenMedia"]);function Fn(e,t,n){(n||document.documentElement).style.setProperty(e,t)}const Dn=e=>`--adsgram-${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}`;const On={iosLight:{accentTextColor:"#5679E3",bgColor:"#ffffff",buttonColor:"#5679E3",buttonTextColor:"#ffffff",destructiveTextColor:"#FF3B30",headerBgColor:"#F8F8F8",hintColor:"#8E8E93",linkColor:"#5679E3",secondaryBgColor:"#EFEFF4",sectionBgColor:"#ffffff",sectionHeaderTextColor:"#6D6D72",sectionSeparatorColor:"#C8C7CC",subtitleTextColor:"#8E8E93",textColor:"#000000"},androidLight:{accentTextColor:"#1C93E3",bgColor:"#ffffff",buttonColor:"#50A8EB",buttonTextColor:"#ffffff",destructiveTextColor:"#CC2929",headerBgColor:"#527DA3",hintColor:"#A8A8A8",linkColor:"#2678B6",secondaryBgColor:"#F0F0F0",sectionBgColor:"#ffffff",sectionHeaderTextColor:"#3A95D5",sectionSeparatorColor:"#D9D9D9",subtitleTextColor:"#82868A",textColor:"#222222"},iosDark:{accentTextColor:"#2EA6FF",bgColor:"#18222D",buttonColor:"#2EA6FF",buttonTextColor:"#ffffff",destructiveTextColor:"#FF6767",headerBgColor:"#21303F",hintColor:"#DBF5FF",linkColor:"#2EA6FF",secondaryBgColor:"#18222D",sectionBgColor:"#21303F",sectionHeaderTextColor:"#83898E",sectionSeparatorColor:"#384656",subtitleTextColor:"#DBF5FF",textColor:"#ffffff"},androidDark:{accentTextColor:"#64b5ef",bgColor:"#212d3b",buttonColor:"#50a8eb",buttonTextColor:"#ffffff",destructiveTextColor:"#ee686f",headerBgColor:"#242d39",hintColor:"#7d8b99",linkColor:"#5eabe1",secondaryBgColor:"#151e27",sectionBgColor:"#1d2733",sectionHeaderTextColor:"#79c4fc",sectionSeparatorColor:"#0d1218",subtitleTextColor:"#7b8790",textColor:"#ffffff"}};function Bn(e){const t=e??ot(),n=Je(),r="macos"===n||"ios"===n;return t?r?"iosDark":"androidDark":r?"iosLight":"androidLight"}const Un={top:0,bottom:0,left:0,right:0};async function Mn(e){return await xt({...e,method:"web_app_request_safe_area",event:"safe_area_changed"}).catch((()=>Un))}const jn={contentSafeArea:"--adsgram-content-safe-area",safeArea:"--adsgram-safe-area"};function zn(e,t,n=document.documentElement){const r=Object.entries(t);for(const[a,o]of r){const t=`${jn[e]}-${a}`;i=t,(n||document.documentElement).style.removeProperty(i),Fn(t,`${o}px`,n)}var i}async function Wn({blockId:e,data:t,EventEmitter:n,initContainer:r,logger:i}){const a=r&&Rn(r)?r:function(e){const t=document.createElement("div");return document.documentElement.append(t),t.setAttribute("id",e),t.setAttribute("style","position: relative;z-index:2147483647;"),t}(e),o=function(e){return e.shadowRoot?e.shadowRoot:e.attachShadow({mode:"open"})}(a);!function(e,t){const n=Object.entries(t);for(const[r,i]of n)i&&Fn(Dn(r),i,e)}(a,On[Bn()]);const{contentSafeArea:s,safeArea:c}=await async function(e){const t=[Tt(e),Mn(e)],[n,r]=await Promise.allSettled(t);return{contentSafeArea:"fulfilled"===n.status?n.value:void 0,safeArea:"fulfilled"===r.status?r.value:void 0}}({timeout:500});!function(e,t,n=document.documentElement){e&&zn("contentSafeArea",e,n),t&&zn("safeArea",t,n)}(s,c,a);const l=lt(s),d=function(e){return Ln.has(e.bannerType)}(t),u=document.body.style.overflow;if(d){document.body.style.overflow="hidden";try{ze("web_app_expand")}catch{}}return Xt(n,[()=>document.body.style.overflow=u,Vn(n),()=>{!function({blockId:e,shadowRoot:t,container:n,shouldRemoveContainer:r}){Sn(null,t);const i=n??document.getElementById(e);i&&r&&i.remove()}({blockId:e,container:a,shadowRoot:o,shouldRemoveContainer:!(r&&Rn(r))}),wt()}],i),{shadowRoot:o,isFullscreen:l}}class $n extends pn{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){try{this.props.logger.add("componentStack",t?.componentStack).addError(e).send("ErrorBoundary")}catch{}this.setState({hasError:!0})}render({EventEmitter:e}){return this.state.hasError?(e.emit(zt.renderError),null):this.props.children}}const qn={NONSKIP_ALWAYS:!0};function Hn(e){return e&&0!==e.length?e.reduce(((e,t)=>(e[t]=!0,e)),{}):{}}function Xn(e){if("https://127.0.0.1:3000"===window.location.origin||"https://tma.adsgram.ai"===window.location.origin){const e=JSON.parse(sessionStorage.getItem("flags")??"[]");if(e.length>0)return Hn(e)}return{...qn,...Hn(e)}}const Gn=2;async function Jn(e,t,n=Gn){if("string"!=typeof e||""===e)return t.add("trackingUrl",JSON.stringify(e)).send("WrongTrackingUrl"),!1;try{const t=await ae(e,{method:"GET",cache:"no-cache"},n),r=await t.json();return t.ok&&!r.error}catch(r){return t.addError(r).add("trackingUrl",e).send("APITrackingError"),!1}}const Yn=15,Zn=30;function Kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qn,er={exports:{}};Qn=er,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,n(i)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var a in n)e.call(n,a)&&n[a]&&(i=r(i,a));return i}function r(e,t){return t?e?e+" "+t:e+t:e}Qn.exports?(t.default=t,Qn.exports=t):window.classNames=t}();const tr=Kn(er.exports),nr={label:"_label_1gxvd_1",text:"_text_1gxvd_19"};function rr(){return new _t(qe,Ht)}const ir=In(new Proxy(rr(),{apply(){console.warn("EventEmitter not initialized")},get(){console.warn("EventEmitter not initialized")}}));var ar,or,sr,cr,lr=0,dr=[],ur=[],pr=Jt.__b,_r=Jt.__r,hr=Jt.diffed,mr=Jt.__c,fr=Jt.unmount;function gr(e,t){Jt.__h&&Jt.__h(or,e,lr||t),lr=0;var n=or.__H||(or.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ur}),n.__[e]}function br(e){return lr=1,function(e,t,n){var r=gr(ar++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Sr(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=or,!or.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return e.__c}));if(i.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&r.__c.props===e)&&(!a||a.call(this,e,t,n))};or.u=!0;var a=or.shouldComponentUpdate,o=or.componentWillUpdate;or.componentWillUpdate=function(e,t,n){if(this.__e){var r=a;a=void 0,i(e,t,n),a=r}o&&o.call(this,e,t,n)},or.shouldComponentUpdate=i}return r.__N||r.__}(Sr,e)}function vr(e,t){var n=gr(ar++,3);!Jt.__s&&Nr(n.__H,t)&&(n.__=e,n.i=t,or.__H.__h.push(n))}function yr(e){return lr=5,wr((function(){return{current:e}}),[])}function wr(e,t){var n=gr(ar++,7);return Nr(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function kr(e,t){return lr=8,wr((function(){return e}),t)}function xr(e){var t=or.context[e.__c],n=gr(ar++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(or)),t.props.value):e.__}function Er(){for(var e;e=dr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Pr),e.__H.__h.forEach(Cr),e.__H.__h=[]}catch(t){e.__H.__h=[],Jt.__e(t,e.__v)}}Jt.__b=function(e){or=null,pr&&pr(e)},Jt.__r=function(e){_r&&_r(e),ar=0;var t=(or=e.__c).__H;t&&(sr===or?(t.__h=[],or.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=ur,e.__N=e.i=void 0}))):(t.__h.forEach(Pr),t.__h.forEach(Cr),t.__h=[],ar=0)),sr=or},Jt.diffed=function(e){hr&&hr(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==dr.push(t)&&cr===Jt.requestAnimationFrame||((cr=Jt.requestAnimationFrame)||Ar)(Er)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==ur&&(e.__=e.__V),e.i=void 0,e.__V=ur}))),sr=or=null},Jt.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Pr),e.__h=e.__h.filter((function(e){return!e.__||Cr(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Jt.__e(n,e.__v)}})),mr&&mr(e,t)},Jt.unmount=function(e){fr&&fr(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Pr(e)}catch(n){t=n}})),n.__H=void 0,t&&Jt.__e(t,n.__v))};var Tr="function"==typeof requestAnimationFrame;function Ar(e){var t,n=function(){clearTimeout(r),Tr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Tr&&(t=requestAnimationFrame(n))}function Pr(e){var t=or,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),or=t}function Cr(e){var t=or;e.__c=e.__(),or=t}function Nr(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Sr(e,t){return"function"==typeof t?t(e):t}function Ir(e,t){for(var n in t)e[n]=t[n];return e}function Rr(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function Vr(e){this.props=e}function Lr(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:Rr(this.props,e)}function r(t){return this.shouldComponentUpdate=n,ln(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Vr.prototype=new pn).isPureReactComponent=!0,Vr.prototype.shouldComponentUpdate=function(e,t){return Rr(this.props,e)||Rr(this.state,t)};var Fr=Jt.__b;Jt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Fr&&Fr(e)};var Dr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Or(e){function t(t){var n=Ir({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=Dr,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Br=Jt.__e;Jt.__e=function(e,t,n,r){if(e.then)for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);Br(e,t,n,r)};var Ur=Jt.unmount;function Mr(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=Ir({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return Mr(e,t,n)}))),e}function jr(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return jr(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function zr(){this.__u=0,this.t=null,this.__b=null}function Wr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function $r(){this.u=null,this.o=null}Jt.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Ur&&Ur(e)},(zr.prototype=new pn).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=Wr(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=jr(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},zr.prototype.componentWillUnmount=function(){this.t=[]},zr.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Mr(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&ln(un,null,e.fallback);return i&&(i.__u&=-33),[ln(un,null,t.__a?null:e.children),i]};var qr=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};($r.prototype=new pn).__a=function(e){var t=this,n=Wr(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),qr(t,e,r)):i()};n?n(a):a()}},$r.prototype.render=function(e){this.u=null,this.o=new Map;var t=vn(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},$r.prototype.componentDidUpdate=$r.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){qr(e,n,t)}))};var Hr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Xr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Gr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Jr=/[A-Z0-9]/g,Yr="undefined"!=typeof document,Zr=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};pn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(pn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Kr=Jt.event;function Qr(){}function ei(){return this.cancelBubble}function ti(){return this.defaultPrevented}Jt.event=function(e){return Kr&&(e=Kr(e)),e.persist=Qr,e.isPropagationStopped=ei,e.isDefaultPrevented=ti,e.nativeEvent=e};var ni={enumerable:!1,configurable:!0,get:function(){return this.class}},ri=Jt.vnode;Jt.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={};for(var i in t){var a=t[i];if(!("value"===i&&"defaultValue"in t&&null==a||Yr&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var o=i.toLowerCase();"defaultValue"===i&&"value"in t&&null==t.value?i="value":"download"===i&&!0===a?a="":"ondoubleclick"===o?i="ondblclick":"onchange"!==o||"input"!==n&&"textarea"!==n||Zr(t.type)?"onfocus"===o?i="onfocusin":"onblur"===o?i="onfocusout":Gr.test(i)?i=o:-1===n.indexOf("-")&&Xr.test(i)?i=i.replace(Jr,"-$&").toLowerCase():null===a&&(a=void 0):o=i="oninput","oninput"===o&&r[i=o]&&(i="oninputCapture"),r[i]=a}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=vn(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=vn(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",ni)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=Hr,ri&&ri(e)};var ii=Jt.__r;Jt.__r=function(e){ii&&ii(e),e.__c};var ai=Jt.diffed;function oi(){return xr(ir)}Jt.diffed=function(e){ai&&ai(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};const si=In(et());function ci(){return xr(si)}const li="https://t.me/+NumBvh9EOiM2MDAy",di="https://t.me/+3u3wa8LtNjVkY2Zi",ui="https://t.me/+PunUZfwks6EyNDY6";function pi(){const e=K().toLowerCase();return"ru"===e?di:e.startsWith("zh")?ui:li}function _i(e){try{const{hostname:t}=new URL(e);return"t.me"===t}catch{return!1}}function hi({url:e,logger:t}){try{!function(e){if(_i(e)){const{pathname:t,search:n}=new URL(e);ze("web_app_open_tg_link",{path_full:t+n})}else ze("web_app_open_link",{try_instant_view:!1,url:e})}(e)}catch{t.add("url",e).send("OpenUrlError","WARN"),window.open(e,"_blank")}}var mi=0;function fi(e,t,n,r,i,a){var o,s,c={};for(s in t)"ref"==s?o=t[s]:c[s]=t[s];var l={type:e,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--mi,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===c[s]&&(c[s]=o[s]);return Jt.vnode&&Jt.vnode(l),l}function gi({}){const e=ci(),t=oi(),n=kr((n=>{n.isTrusted&&(n.stopPropagation(),t.emit(zt.leave),hi({url:pi(),logger:e}))}),[t,e]);return fi("div",{className:nr.label,onClick:n,children:fi("span",{className:nr.text,children:"@adsgram_ai – ads in Telegram"})})}const bi={footer:"_footer_rjio1_1"},vi="_timer_1kqy0_1",yi="_time_1kqy0_1",wi=In(void 0);function ki(){return xr(wi)}const xi=In(qn);function Ei(e){const t=xr(xi);return wr((()=>Boolean(t[e])),[e,t])}function Ti(){const e=Ei("FORCED_SUB_FORMAT");return!(ki()===l.InterstitialFullscreen)&&e?Zn:Yn}const Ai=e=>`${e}`.padStart(2,"0"),Pi=e=>{const t=e%h;return`${Ai((e-t)/h%m)}:${Ai(t)}`},Ci=Lr((({timer:e})=>{const t=Ti(),[n,r]=br(t),i=kr(((e,t)=>{r(t)}),[]);return vr((()=>{e.subscribeOnTimeUpdate(i)}),[i,e]),fi("div",{className:vi,children:fi("span",{className:yi,children:Pi(n)})})})),Ni=In(!1);function Si(){const e=["android","android_x","ios"],t=Je();return!!t&&e.includes(t)}function Ii(){return xr(Ni)&&Si()}function Ri({timer:e}){const t=Ei("NOT_SHOW_ADSGRAM_LABEL"),n=Ii();return t&&n?null:fi("div",{className:bi.footer,children:[!n&&fi(Ci,{timer:e}),!t&&fi(gi,{})]})}const Vi="Ad · 18+",Li="Реклама · 18+";function Fi(){return void 0!==window.ontouchstart||"ontouchstart"in document.documentElement}const Di="_wrapper_iup2q_1",Oi="_icon_iup2q_19",Bi="_name_iup2q_28",Ui="_clickable_iup2q_48",Mi=({src:e,alt:t,className:n,isCriticalImage:r,...i})=>{const a=ci();a.add("url",e);const o=r?"Critical":"";return fi("img",{className:n,src:e,alt:t,onError:kr((()=>{a.send(`${o}ImageLoadError`)}),[o,a]),...i})};function ji({isClickable:e,onClick:t,advertiserName:n,icon:r}){const i=Fi();return fi("div",{className:Di,children:[fi(Mi,{src:r,alt:"channel",className:Oi}),fi("button",{className:tr(Bi,e&&Ui),onClick:i?void 0:t,onTouchStart:i?t:void 0,disabled:!e,children:n})]})}const zi={post:"_post_14kt7_1",show:"_show_14kt7_1",message:"_message_14kt7_21","android-dark":"_android-dark_14kt7_31",androidDark:"_android-dark_14kt7_31",image:"_image_14kt7_35",text:"_text_14kt7_43",title:"_title_14kt7_53",description:"_description_14kt7_61",adlabel:"_adlabel_14kt7_68",container:"_container_14kt7_78",kebab:"_kebab_14kt7_89","kebab-content":"_kebab-content_14kt7_107",kebabContent:"_kebab-content_14kt7_107"},Wi="_close_e8f0c_1",$i="_image_e8f0c_18",qi=Or(((e,t)=>ln("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("path",{d:"M18.295 7.115a.997.997 0 1 0-1.41-1.41L12 10.59 7.115 5.705a.997.997 0 0 0-1.41 1.41L10.59 12l-4.885 4.885a.997.997 0 0 0 1.41 1.41L12 13.41l4.885 4.885a.997.997 0 1 0 1.41-1.41L13.41 12l4.885-4.885Z"})))),Hi=In(void 0);function Xi(e){const t=xr(Hi);return wr((()=>t?.[e]??""),[e,t])}function Gi({isCloseVisible:e}){const t=oi(),n=ci(),r=Fi(),i=ki()===l.InterstitialFullscreen,a=Xi("skip"),o=kr((r=>{e&&(r.isTrusted?(r.preventDefault(),r.stopPropagation(),Jn(a,n),t.emit(Wt.onComplete)):t.emit(Wt.onError))}),[t,e,n,a]);return e&&i?fi("button",{onClick:r?void 0:o,onTouchStart:r?o:void 0,className:Wi,children:fi(qi,{className:$i,fill:"var(--adsgram-text-color)"})}):null}const Ji="_kebab_witt2_1",Yi="_hidden_witt2_7",Zi="_icon_witt2_11",Ki="_video-banner_witt2_17",Qi="_wrapper_6je2u_1",ea="_legal-info_6je2u_15",ta="_item_19dus_1",na="_header_19dus_15",ra="_content_19dus_20";function ia({header:e,content:t}){return fi("div",{className:ta,children:[fi("span",{className:na,children:e}),fi("span",{className:ra,children:t})]})}const aa=({kebab:e,setIsOpen:t,className:n})=>{const{legalName:r,inn:i,erid:a,regNumber:o}=e,s=oi(),c=yr(null),l=kr((e=>{e.preventDefault(),e.stopPropagation(),c.current&&!c.current.contains(e.target)&&(t(!1),s.emit(zt.play),c.current.getRootNode().removeEventListener("click",l,{capture:!0}))}),[s,t]);return vr((()=>{c.current&&c.current.getRootNode().addEventListener("click",l,{capture:!0})}),[l]),fi("div",{className:tr(Qi,n),ref:c,children:fi("div",{className:ea,children:[fi(ia,{header:"Юридическое лицо",content:r}),fi(ia,{header:"ИНН",content:i}),fi(ia,{header:"ОГРН",content:o}),fi(ia,{header:"ERID",content:a})]})})};function oa(e){return"string"==typeof e&&""!==e}function sa(e){if(!e)return!1;const{legalName:t,erid:n,regNumber:r,inn:i}=e;return oa(t)&&oa(i)&&oa(n)&&oa(r)}const ca=Or(((e,t)=>ln("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px",fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("path",{d:"M12.522 8c1.148 0 2.087-.9 2.087-2s-.94-2-2.087-2c-1.148 0-2.087.9-2.087 2s.939 2 2.087 2Zm0 2c-1.148 0-2.087.9-2.087 2s.939 2 2.087 2c1.148 0 2.087-.9 2.087-2s-.94-2-2.087-2Zm0 6c-1.148 0-2.087.9-2.087 2s.939 2 2.087 2c1.148 0 2.087-.9 2.087-2s-.94-2-2.087-2Z"})))),la=Lr((({kebab:e,classNameKebab:t,classNameKebabContent:n,isVideoBanner:r=!1})=>{const i=oi(),[a,o]=br(!1),s=kr((()=>{a||(o(!0),i.emit(zt.pause))}),[i,a]);return sa(e)?fi("div",{className:tr(Ji,t),onClick:s,children:[fi(ca,{className:tr(Zi,{[Ki]:r}),fill:r?"#fff":"var(--adsgram-text-color)"}),a&&fi(aa,{className:n,kebab:e,setIsOpen:o})]}):fi("div",{className:tr(Ji,t,Yi)})})),da=Lr((({image:e,title:t,description:n,advertiserName:r,icon:i,onClick:a,isClickable:o,kebab:s,isCloseVisible:c})=>{const l=Ei("RU_GEO_SHOW")?Li:Vi,d=Bn();return fi("div",{className:zi.post,children:fi("div",{className:tr(zi.message,zi[d]),children:[fi(Gi,{isCloseVisible:c}),fi(la,{kebab:s,classNameKebab:zi.kebab,classNameKebabContent:zi.kebabContent}),fi(Mi,{src:e,alt:"Post main",className:zi.image,isCriticalImage:!0}),fi("div",{className:zi.text,children:[fi("h2",{className:zi.title,children:t}),fi("span",{className:zi.description,children:n}),fi(ji,{isClickable:o,onClick:a,advertiserName:r,icon:i}),fi("span",{className:zi.adlabel,children:l})]})]})})})),ua={button:"_button_pbmuc_1",show:"_show_pbmuc_1",icon:"_icon_pbmuc_45"},pa=Or(((e,t)=>ln("svg",{width:14,height:14,fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("path",{d:"M4.117 3.294V4.94h3.706l-5.147 5.147 1.236 1.235 5.147-5.147v3.706h1.647V3.294H4.117z"})))),_a=Or(((e,t)=>ln("svg",{width:14,height:14,fill:"none",stroke:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("rect",{x:3.5,y:3.5,width:7,height:7,rx:.5}),ln("path",{strokeWidth:.5,d:"M4.25 4.25h5.5v.5h-5.5z"}))));function ha(e){if(_i(e)){const{pathname:t}=new URL(e);return/bot\/./i.test(t)}return!1}function ma({buttonName:e,onClick:t,url:n}){const r=Fi(),i=ha(n)?_a:pa;return fi("button",{className:ua.button,onClick:r?void 0:t,onTouchStart:r?t:void 0,children:[e,fi(i,{className:ua.icon})]})}const fa="_timeline_1b8xb_1",ga="_bar_1b8xb_10",ba="_progress_1b8xb_25",va=(e,t)=>e>t?Ea.viewed:e<t?Ea.scheduled:Ea.inProgress,ya={"timeline-container":"_timeline-container_sdux2_1",timelineContainer:"_timeline-container_sdux2_1",video:"_video_sdux2_7"},wa={bannerIndex:0,numOfBanners:1},ka=In(wa);const xa=2,Ea={viewed:"viewed",inProgress:"inProgress",scheduled:"scheduled"};function Ta({isVideoBanner:e,render:t}){const n=xr(ka),r=ki()===l.InterstitialFullscreen,{bannerIndex:i,numOfBanners:a}=n;return!e&&(r||a<xa)?null:fi("div",{className:tr(ya.timelineContainer,{[ya.video]:e}),children:Array.from({length:a},((e,n)=>{const r=va(i,n);return t(r)}))})}const Aa=Lr((({timer:e,progressState:t})=>{const n=function(e,t,n){const r=yr(null),i=n===Ea.inProgress,a=n===Ea.viewed;vr((()=>{a&&r.current&&(r.current.style.width="100%")}),[a]);const o=kr((()=>{const n=()=>{if(r.current){const i=e.getDiffFromStart()/_/t*f,a=Number.parseFloat(r.current.style.width)||0;a<i&&(r.current.style.width=`${i}%`),a<f&&requestAnimationFrame(n)}};requestAnimationFrame(n)}),[t,e]);return vr((()=>{r.current&&i&&o()}),[o,i]),r}(e,Ti(),t);return fi("div",{className:fa,children:fi("div",{className:ga,children:fi("div",{className:ba,ref:n})})})})),Pa={banner:"_banner_1fyti_1",preview:"_preview_1fyti_19",wrapper:"_wrapper_1fyti_23",fullscreen:"_fullscreen_1fyti_45","timer-wrapper":"_timer-wrapper_1fyti_49",timerWrapper:"_timer-wrapper_1fyti_49",desktop:"_desktop_1fyti_58",light:"_light_1fyti_79"};function Ca(){return xr(Ni)&&!Si()}const Na=({classNameDesktop:e,classNameLight:t,children:n})=>{const r=Ca(),i=ot();return r?fi("div",{className:tr(e,{[t]:!i}),children:n}):fi(un,{children:n})},Sa=In(!1);function Ia(){return xr(Sa)}function Ra({image:e,title:t,description:n,advertiserName:r,buttonName:i,url:a,icon:o,kebab:s,bannerRef:c,onClick:l,isClickable:d,isCloseVisible:u,timer:p}){const _=Ii(),h=Ia();return fi(Na,{classNameDesktop:Pa.desktop,classNameLight:Pa.light,children:fi("div",{className:tr(Pa.banner,{[Pa.preview]:h}),ref:c,children:fi("div",{className:tr(Pa.wrapper,{[Pa.fullscreen]:_}),children:[_&&fi("div",{className:Pa.timerWrapper,children:fi(Ci,{timer:p})}),fi(Ta,{isVideoBanner:!1,render:e=>fi(Aa,{timer:p,progressState:e})}),fi(da,{advertiserName:r,title:t,description:n,image:e,icon:o,onClick:l,isClickable:d,kebab:s,isCloseVisible:u}),d&&fi(ma,{buttonName:i,onClick:l,url:a}),fi(Ri,{timer:p})]})})})}function Va(e){const t=window.getComputedStyle(e);if("0px"==t.height||"none"==t.display||"0"==t.opacity||"hidden"==t.visibility||"circle(0px at 50% 50%)"==t.clipPath||"scale(0)"==t.transform||e.hasAttribute("hidden")||"hidden"===document.visibilityState)return!1;const n=e.getBoundingClientRect(),r=n.left,i=n.top,a=document.elementFromPoint(r,i);if(null!=a&&!e.isSameNode(a)){const n=t.zIndex,r=window.getComputedStyle(a).zIndex;if(Number(n)<Number(r))return!1;if(""===n&&""===r&&e.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING)return!1}const o=(n.bottom-n.top)*(n.right-n.left);return(Math.min(n.bottom,window.innerHeight)-Math.max(0,n.top))*(Math.min(n.right,window.innerWidth)-Math.max(0,n.left))>=o*La}const La=.5;function Fa(e){const t=yr(null),[n,r]=br(!1);return vr((()=>{t.current=new IntersectionObserver((([e])=>{e.isIntersecting&&Va(e.target)?r(!0):r(!1)}),{root:null,rootMargin:"0px",threshold:La})}),[]),vr((()=>(e.current&&t.current&&t.current.observe(e.current),()=>{t.current&&(r(!1),t.current.disconnect())})),[e]),n}function Da({element:e}){const t=ci(),n=Xi("render"),r=yr(!1),i=Fa(e),a=window.innerWidth/window.innerHeight>1,o=Si()&&a;vr((()=>{i&&n&&!r.current&&(Jn(n,t),o&&t.send("Landscape","INFO"),r.current=!0)}),[n,r,i,t,o])}const Oa=In("");const Ba=new Set(["21","4855","4882","4995","4853"]);function Ua(){const e=ci(),t=Xi("reward"),n=oi(),r=xr(Oa);vr((()=>{const i=Ba.has(r)?async()=>{let r=!0;r=await Jn(t,e),r?n.emit(Wt.onReward):n.emit($t.onNotSuitable)}:()=>{Jn(t,e),n.emit(Wt.onReward)};return n.on(zt.sendReward,i),()=>{n.off(zt.sendReward,i)}}),[n,t,e,r])}class Ma{static checkInterval=100;startTime;endTime;time;stopped;finished;stopTime;fromStopToResumeTime;onSpecificTimeCallback;onTimeUpdateCallback;onTickUpdateCallback;onEndCallback;constructor({callbacks:e,endTime:t,immediateStart:n=!0}){this.startTime=performance.now(),this.endTime=t,this.time=0,this.stopped=!n,this.finished=!1,this.stopTime=0,this.fromStopToResumeTime=0,this.onSpecificTimeCallback={};for(const r in e)Number.isNaN(Number(r))||(this.onSpecificTimeCallback[r]=e[r]);this.onTimeUpdateCallback=e.onTimeUpdate,this.onTickUpdateCallback=e.onTick,this.onEndCallback=e.endCallback,n&&this.tick()}get isFinished(){return this.finished}get isStopped(){return this.stopped}get elapsedTime(){return this.endTime-this.time}stop(){return this.stopped||(this.stopTime=performance.now(),this.stopped=!0),this.time}resume(){if(this.stopped){const e=performance.now()-this.stopTime;this.fromStopToResumeTime+=e,this.stopped=!1,this.tick()}}restart(){this.time=0,this.fromStopToResumeTime=performance.now()-this.startTime,this.stopped=!1,this.finished=!1,this.tick()}subscribeOnSpecificTimeUpdate(e,t){this.onSpecificTimeCallback[e]=t}subscribeOnTimeUpdate(e){this.onTimeUpdateCallback=e}subscribeOnTickUpdate(e){this.onTickUpdateCallback=e}subscribeOnEnd(e){this.onEndCallback=e}unsubscribeAll(){this.onEndCallback=void 0,this.onTimeUpdateCallback=void 0,this.onSpecificTimeCallback={},this.onTickUpdateCallback=void 0}destroy(){this.finished=!0,this.unsubscribeAll()}getDiffFromStart(){return(this.isStopped?this.stopTime:performance.now())-this.fromStopToResumeTime-this.startTime}tick(){if(this.stopped||this.finished)return;if(performance.now()-this.fromStopToResumeTime-this.startTime>(this.time+1)*_){++this.time,this.onTimeUpdateCallback?.(this.time,this.elapsedTime);const e=this.onSpecificTimeCallback[this.time];e?.(this.time,this.elapsedTime)}this.time<this.endTime?setTimeout(this.tick.bind(this),Ma.checkInterval):(this.onEndCallback?.(this.time,this.elapsedTime),this.finished=!0),this.onTickUpdateCallback?.(this.time,this.elapsedTime)}}function ja({sendTackingTime:e,element:t,preventSend:n,immediateStart:r=!0}){const i=ci(),a=oi(),o=Xi("show"),s=oa(o),[c,l]=br(!1),[d,u]=br(!0),p=wr((()=>new Ma({endTime:e,callbacks:{},immediateStart:r})),[r,e]),_=Fa(t),h=wr((()=>null!==t.current&&_&&d&&Va(t.current)),[t,d,_]),m=kr((async()=>{c||n||(await Jn(o,i),l(!0))}),[c,i,n,o]),f=kr((()=>{h||p.stop()}),[h,p]);return vr((()=>(p.subscribeOnTickUpdate(f),p.subscribeOnEnd(m),()=>{p.unsubscribeAll()})),[m,f,p]),vr((()=>{p.isStopped&&h&&s&&p.restart()}),[s,h,p]),vr((()=>{s||p.stop()}),[s,p]),vr((()=>{const e=()=>{u(!0)},t=()=>{u(!1)};return a.on(zt.return,e),a.on(zt.leave,t),()=>{a.off(zt.return,e),a.off(zt.leave,t)}}),[a]),c}const za={button:"_button_1u3uw_1",show:"_show_1u3uw_1",visible:"_visible_1u3uw_46",hidden:"_hidden_1u3uw_51",shine:"_shine_1u3uw_70"},Wa=15e3,$a=5e3,qa=In(null);function Ha(){return xr(qa)}function Xa({text:e,isVisible:t,clickUrl:n,isPackshotVisible:r}){const i=Ha(),a=oi(),o=ci(),s=Xi("click"),c=ki()===l.InterstitialFullscreen,d=yr(1/0),u=kr((e=>{e.isTrusted&&(ha(n)?i&&(i.muted=!0):(i?.pause(),d.current=Date.now()),Jn(s,o),a.emit(zt.leave),hi({url:n,logger:o}))}),[a,s,n,o,i]),p=kr((()=>{Date.now()-d.current>Wa&&a.emit(c?Wt.onComplete:zt.sendReward),d.current=1/0}),[a,c]);return vr((()=>(a.on(zt.return,p),()=>{a.off(zt.return,p)})),[a,p]),fi("button",{className:tr(za.button,t?za.visible:za.hidden,{[za.shine]:r}),onClick:u,children:e})}const Ga={wrapper:"_wrapper_14j31_1",adlabeltext:"_adlabeltext_14j31_15",adlabel:"_adlabel_14j31_15",tgchannel:"_tgchannel_14j31_29"};function Ja(){const e=ci(),t=oi(),n=Ei("NOT_SHOW_ADSGRAM_LABEL"),r=Ei("RU_GEO_SHOW")?Li:Vi,i=kr((n=>{n.stopPropagation(),n.preventDefault(),t.emit(zt.leave),hi({url:pi(),logger:e})}),[t,e]);return n?fi("p",{className:Ga.adlabel,children:r}):fi("div",{className:Ga.wrapper,onClick:i,children:[fi("p",{className:Ga.tgchannel,children:"@adsgram_ai – ads in Telegram"}),fi("p",{className:Ga.adlabeltext,children:r})]})}const Ya={close:"_close_cli9a_1",clickable:"_clickable_cli9a_9",image:"_image_cli9a_13"},Za={adloaded:"adloaded",addurationchange:"addurationchange",adimpression:"adimpression",adstarted:"adstarted",adtagloaded:"adtagloaded",adtagstartloading:"adtagstartloading",adprogress:"adprogress",adpaused:"adpaused",adresumed:"adresumed",advolumemuted:"advolumemuted",advolumechanged:"advolumechanged",adcomplete:"adcomplete",adskippablestatechanged:"adskippablestatechanged",adfirstquartile:"adfirstquartile",admidpoint:"admidpoint",adthirdquartile:"adthirdquartile",aderror:"aderror",addestroyed:"addestroyed",adinitialplayrequestsucceeded:"adinitialplayrequestsucceeded",adinitialplayrequestfailed:"adinitialplayrequestfailed"},Ka={showActionButton:"showActionButton",enableCloseButton:"enableCloseButton",showPackshot:"showPackshot"},Qa={...Za,...Ka},eo=pt(Qa);function to(){const e=Ha(),t=oi(),n=ci(),r=Xi("skip"),[i,a]=br(!1),o=ki()===l.InterstitialFullscreen,s=kr((e=>{i&&(e.isTrusted?(e.preventDefault(),e.stopPropagation(),Jn(r,n),t.emit(Wt.onComplete)):t.emit(Wt.onError))}),[t,i,n,r]);return vr((()=>{e&&o&&e.on(Ka.enableCloseButton,(()=>{a(!0)}))}),[o,e]),fi("div",{onClick:s,className:tr(Ya.close,i&&Ya.clickable),children:fi(qi,{className:Ya.image})})}const no={"header-wrapper":"_header-wrapper_1lfc1_1",headerWrapper:"_header-wrapper_1lfc1_1",header:"_header_1lfc1_1",container:"_container_1lfc1_18","expanded-header":"_expanded-header_1lfc1_23",expandedHeader:"_expanded-header_1lfc1_23","label-container":"_label-container_1lfc1_27",labelContainer:"_label-container_1lfc1_27",preview:"_preview_1lfc1_37",kebab:"_kebab_1lfc1_41","kebab-content":"_kebab-content_1lfc1_49",kebabContent:"_kebab-content_1lfc1_49"},ro={point:"_point_m3ogu_1"};function io({packshotDuration:e}){const t=yr(null),n=Ha(),r=ki()===l.InterstitialFullscreen,i=kr((()=>{if(t.current&&n){const r=n.adDuration+(e??0),i=$a/r*f;t.current.style.left=`calc(${i}% - 3px)`,t.current.style.opacity="1"}}),[e,n]);return vr((()=>{n&&r&&n.on(Za.adstarted,i)}),[r,i,n]),r?fi("div",{className:ro.point,ref:t}):null}const ao={timeline:"_timeline_15aiu_1",bar:"_bar_15aiu_10",progress:"_progress_15aiu_17"};function oo({packshotDuration:e,progressState:t}){const n=yr(null),r=Ha(),i=t===Ea.inProgress,a=t===Ea.viewed,o=kr((()=>{n.current&&r&&i&&function({player:e,progress:t,packshotDuration:n}){const r=e.adDuration+(n??0);let i,a,o=!1,s=!1;e.on(Za.adcomplete,(()=>{s=!0})),e.on(Za.addestroyed,(()=>{o=!0}));const c=l=>{if(s&&n){void 0===i&&(i=l);const s=l-i;if(s>=n&&(o=!0),a!==l){const n=(e.adDuration+s)/r*f;t.style.width=`${n}%`}a=l}if(!s){const n=e.adCurrentTime/r*f;Number(t.style.width.replace("%",""))<n&&(t.style.width=`${n}%`)}o||requestAnimationFrame(c)};requestAnimationFrame(c)}({player:r,progress:n.current,packshotDuration:e})}),[i,e,r]);return vr((()=>{r&&r.on(Za.adstarted,o)}),[o,r]),vr((()=>{a&&n.current&&(n.current.style.width="100%")}),[a]),fi("div",{className:ao.timeline,children:fi("div",{className:ao.bar,children:[fi(io,{packshotDuration:e}),fi("div",{className:ao.progress,ref:n})]})})}const so={volume:"_volume_10n0w_1"},co=Or(((e,t)=>ln("svg",{width:24,height:24,fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 5.345c0-1.576-1.92-2.349-3.011-1.213L6.654 7.6H5a3 3 0 0 0-3 3v2.8a3 3 0 0 0 3 3h1.23l3.798 3.703c1.109 1.08 2.972.295 2.972-1.253V5.345ZM5 14.4h2.044L11 18.257V5.966L7.505 9.6H5a1 1 0 0 0-1 1v2.8a1 1 0 0 0 1 1Z"}),ln("path",{d:"M16.707 8.793a1 1 0 1 0-1.414 1.414L17.086 12l-1.793 1.793a1 1 0 0 0 1.414 1.414l1.793-1.793 1.793 1.793a1 1 0 0 0 1.414-1.414L19.914 12l1.793-1.793a1 1 0 0 0-1.414-1.414L18.5 10.586l-1.793-1.793Z"})))),lo=Or(((e,t)=>ln("svg",{width:24,height:24,fill:"#fff",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},ln("path",{d:"M16.807 3.39a1 1 0 0 1 1.324-.497 10 10 0 0 1 .253 18.095 1 1 0 1 1-.877-1.797 8 8 0 0 0-.202-14.476 1 1 0 0 1-.498-1.324Z"}),ln("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.989 4.132C11.08 2.996 13 3.769 13 5.345V18.85c0 1.548-1.863 2.334-2.972 1.253L6.231 16.4H5a3 3 0 0 1-3-3v-2.8a3 3 0 0 1 3-3h1.654l3.335-3.468ZM7.044 14.4H5a1 1 0 0 1-1-1v-2.8a1 1 0 0 1 1-1h2.505L11 5.966v12.29L7.044 14.4Z"}),ln("path",{d:"M16.479 6.536a1 1 0 0 0-.827 1.821 4 4 0 0 1 .102 7.238 1 1 0 0 0 .876 1.798 6 6 0 0 0-.151-10.857Z"}))));function uo(){const e=Ha(),[t,n]=br(!1);vr((()=>{e&&n(e.muted)}),[e]);return fi("div",{onClick:kr((()=>{e.muted=!t,n((e=>!e))}),[t,e]),className:so.volume,children:fi(t?co:lo,{})})}function po({kebab:e,packshotDuration:t}){const n=ki()===l.InterstitialFullscreen,r=sa(e),i=Ia();return fi("div",{className:no.headerWrapper,children:[fi(Ta,{isVideoBanner:!0,render:e=>fi(oo,{packshotDuration:t,progressState:e})}),fi("div",{className:tr(no.header,i&&no.preview,{[no.expandedHeader]:n&&r}),children:[fi("div",{className:no.container,children:fi(uo,{})}),fi("div",{className:no.labelContainer,children:fi(Ja,{})}),fi("div",{className:no.container,children:[r&&fi(la,{kebab:e,classNameKebab:no.kebab,classNameKebabContent:no.kebabContent,isVideoBanner:!0}),n&&fi(to,{})]})]})]})}const _o={packshot:"_packshot_1eu44_1",creatives:"_creatives_1eu44_23",image:"_image_1eu44_35",title:"_title_1eu44_44",description:"_description_1eu44_54",play:"_play_1eu44_63",pause:"_pause_1eu44_68"};function ho({image:e,title:t,description:n,isVisible:r}){return fi("div",{className:`${_o.packshot} ${r?_o.play:_o.pause}`,children:fi("div",{className:`${_o.creatives} ${r?_o.play:_o.pause}`,children:[fi(Mi,{className:_o.image,src:e,alt:"app icon"}),fi("span",{className:_o.title,children:t}),fi("span",{className:_o.description,children:n})]})})}const mo={wrapper:"_wrapper_1vxac_1",desktop:"_desktop_1vxac_33"},fo="-x265.mp4",go={X265:"hvc1",X264:"avc1.4d401f",VP9:"vp9"},bo={[go.X264]:87e-5,[go.VP9]:61e-5,[go.X265]:76e-5},vo=1.1,yo={"slow-2g":.025,"2g":.035,"3g":.35,"4g":1.4},wo=.025,ko={ethernet:1.4,wifi:1.4,wimax:1.4,bluetooth:.35,cellular:.35,none:-1};function xo(e){if(e.codec&&e.mimeType)return e.codec;if("video/mp4"===e.mimeType&&e.fileURL?.endsWith(fo))return go.X265;if(e.mimeType)switch(e.mimeType){case"video/mp4":return go.X264;case"video/webm":return go.VP9;default:return null}return null}function Eo(e){const{width:t,height:n,bitrate:r}=e;if(r)return r;const i=xo(e)??go.X264;return bo[i]*t*n}function To(){let e=1;return Number.isFinite(window.devicePixelRatio)&&window.devicePixelRatio>1&&(e=window.devicePixelRatio),e}const Ao=1e3;function Po(e,t){const n=function(){if(!navigator.onLine)return-1;if(void 0===navigator.connection)return vo;const{connection:e}=navigator;return"number"==typeof e?.downlink&&e.downlink>0?e.downlink:"string"==typeof e?.effectiveType?yo[e.effectiveType]||wo:e.type?ko[e.type]??wo:wo}(),r=n>-1,{width:i,height:a}=e;let o=1;if(r){const t=Math.round(n*Ao);o*=Math.min(t/Eo(e),1)}if(i&&a){const e=Math.min(i/(function(e){if(e){if(Number.isFinite(e.offsetWidth)&&0!==e.offsetWidth)return e.offsetWidth;const t=window.getComputedStyle(e,null);if(t){const e=t.getPropertyValue("width").toLowerCase();return Number.parseFloat(e)||0}}return 0}(t)*To()),a/(function(e){if(e){if(Number.isFinite(e.offsetHeight)&&0!==e.offsetHeight)return e.offsetHeight;const t=window.getComputedStyle(e,null);if(t){const e=t.getPropertyValue("height").toLowerCase();return Number.parseFloat(e)||0}}return 0}(t)*To()));o*=Math.min(1,e)}return o}const Co=["loadstart","durationchange","playing","waiting","loadedmetadata","loadeddata","canplay","canplaythrough"];function No(){return navigator.userAgent||null}function So(){const e=No()??"";return!(!/(ipad|iphone|ipod)/i.test(e)||!Fi())}function Io(){return!!(!So()&&Fi()&&/macintel/i.test(navigator.platform)&&To()>1&&("number"==typeof navigator.maxTouchPoints?navigator.maxTouchPoints:-1)>1)}function Ro(e,t){const n=document.createElement("video");if(!n.canPlayType)return!1;if((function(){const e=No()??"";return!(!/safari\/[\d.]*/i.test(e)||/(chrome|chromium|android|crios|fxios)/i.test(e))}()||Io()||So())&&"video/webm"===e)return!1;if(e&&t){let r;try{r=n.canPlayType(`${e}; codecs="${t}"`)}catch{return r=n.canPlayType(e),"probably"===r}if(""!==r)return!0}else if(e&&!t){if(""!==n.canPlayType(e))return!0}return!1}const Vo=new Set(["video/mp4","video/webm"]);function Lo(e){const t=e.filter((e=>null!==e.fileURL&&null!==e.mimeType&&Vo.has(e.mimeType)&&function(e){if(!e.mimeType)return!1;const t=xo(e);return!!t&&Ro(e.mimeType,t)}(e)));if(0===t.length){const n=e.filter((e=>"video/mp4"===e.mimeType&&xo(e)===go.X264));t.push(...n)}return t}const Fo={201:{code:201,description:"Video player expecting different linearity."},400:{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},401:{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},402:{code:402,description:"Timeout of MediaFile URI."},403:{code:403,description:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},501:{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},502:{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},503:{code:503,description:"Could not find NonLinear resource with supported type."},603:{code:603,description:"Unable to fetch CompanionAds/Companion resource."},901:{code:901,description:"General VPAID error."},1002:{code:1002,description:"Required DOMParser API is not available"}},Do={303:{code:303,description:"No VAST response after one or more Wrappers."},900:{code:900,description:"Undefined Error."},1001:{code:1001,description:"Invalid input for loadAds method"}};function Oo(e){e&&(e.style.display="block")}class Bo{_rmpVast;_params;_container;_adContainer;_adPlayer;_firstAdPlayerPlayRequest;_skippableAdCanBeSkipped;_creativeLoadTimeoutCallback;_onTimeupdateCheckSkipFn;_onDurationChangeFn;_onLoadedmetadataPlayFn;_onContextMenuFn;_onPlaybackErrorFn;constructor(e){this._rmpVast=e,this._params=e.params,this._container=e.container,this._adContainer=e.adContainer,this._adPlayer=e.__adPlayer,this._firstAdPlayerPlayRequest=!0,this._skippableAdCanBeSkipped=!1,this._onTimeupdateCheckSkipFn=null,this._onDurationChangeFn=null,this._onLoadedmetadataPlayFn=null,this._onContextMenuFn=null,this._onPlaybackErrorFn=null,this._creativeLoadTimeoutCallback=null}get skippableAdCanBeSkipped(){return this._skippableAdCanBeSkipped}_onDurationChange(){let e=-1;if(this._rmpVast.rmpVastAdPlayer&&(e=this._rmpVast.rmpVastAdPlayer.duration),this._rmpVast.emitEvent(Za.addurationchange),-1===e)return;const t=this._rmpVast.creative.trackingEvents||{};Object.keys(t).forEach((n=>{if(/progress-/i.test(n)){const r=n.split("-")[1];if(/%/i.test(r)){const i=r.slice(0,-1),a=e*Number.parseFloat(i)/f;t[n].forEach((e=>{this._rmpVast.progressEvents.push({time:a,url:e})}))}else{t[n].forEach((e=>{this._rmpVast.progressEvents.push({time:Number.parseFloat(r)*_,url:e})}))}}})),this._rmpVast.progressEvents.length>0&&this._rmpVast.progressEvents.sort(((e,t)=>e.time-t.time))}_onLoadedmetadataPlay(){this._creativeLoadTimeoutCallback&&clearTimeout(this._creativeLoadTimeoutCallback),Oo(this._adContainer),Oo(this._adPlayer),this._rmpVast.__adOnStage=!0,this._rmpVast.rmpVastAdPlayer&&(this._rmpVast.rmpVastAdPlayer.play(this._firstAdPlayerPlayRequest),this._firstAdPlayerPlayRequest=!1),this._rmpVast.emitEvent(Za.adloaded),this._rmpVast.trackings?.dispatch("loaded")}_onPlaybackError(e){if(e?.target&&e.target instanceof HTMLVideoElement){const t=e.target;if(t.error&&Number.isFinite(t.error.code)){const e=t.error.code;let n="";"string"==typeof t.error.message&&(n=t.error.message);if(4===e){const e={errorCode:t.error.code,errorMessage:t.error.message,videoNetworkState:t.networkState,videoReadyState:t.readyState,videoSrc:t.src,videoCurrentSrc:t.currentSrc};this._rmpVast.processVastErrors(Fo[401].code,!0,e)}}}}_onContextMenu(e){e&&(e.stopPropagation(),e.preventDefault())}_onTimeupdateCheckSkip(){const e=this._adPlayer?.currentTime,t=this._rmpVast.creative.skipoffset;e&&t&&Number.isFinite(e)&&e>0&&e>=t&&(this._onTimeupdateCheckSkipFn&&this._adPlayer?.removeEventListener("timeupdate",this._onTimeupdateCheckSkipFn),this._skippableAdCanBeSkipped=!0,this._rmpVast.emitEvent(Za.adskippablestatechanged))}removeEventListenerIfFnExists(e,t){t&&this._adPlayer?.removeEventListener(e,t)}destroy(){this._creativeLoadTimeoutCallback&&clearTimeout(this._creativeLoadTimeoutCallback),this._adPlayer&&(this.removeEventListenerIfFnExists("timeupdate",this._onTimeupdateCheckSkipFn),this.removeEventListenerIfFnExists("durationchange",this._onDurationChangeFn),this.removeEventListenerIfFnExists("loadedmetadata",this._onLoadedmetadataPlayFn),this.removeEventListenerIfFnExists("contextmenu",this._onContextMenuFn),this.removeEventListenerIfFnExists("error",this._onPlaybackErrorFn)),this._onPlaybackErrorFn&&this._adPlayer?.removeEventListener("error",this._onPlaybackErrorFn)}update(e,t){this._onDurationChangeFn=this._onDurationChange.bind(this),this._adPlayer?.addEventListener("durationchange",this._onDurationChangeFn,{once:!0}),this._onLoadedmetadataPlayFn=this._onLoadedmetadataPlay.bind(this),this._adPlayer?.addEventListener("loadedmetadata",this._onLoadedmetadataPlayFn,{once:!0}),this._onContextMenuFn=this._onContextMenu.bind(this),this._adPlayer?.addEventListener("contextmenu",this._onContextMenuFn),this._onPlaybackErrorFn=this._onPlaybackError.bind(this),this._creativeLoadTimeoutCallback=setTimeout((()=>{const e=this._adPlayer,t={videoNetworkState:e?.networkState,videoReadyState:e?.readyState,videoSrc:e?.src,videoCurrentSrc:e?.currentSrc};this._rmpVast.processVastErrors(Fo[402].code,!0,t)}),this._params.creativeLoadTimeout),this._adPlayer&&(this._adPlayer.addEventListener("error",this._onPlaybackErrorFn),this._adPlayer.src=e,this._adPlayer.load()),this._rmpVast.creative.isSkippableAd&&(this._onTimeupdateCheckSkipFn=this._onTimeupdateCheckSkip.bind(this),this._adPlayer?.addEventListener("timeupdate",this._onTimeupdateCheckSkipFn))}parse(e){const t=e.mediaFiles;if(t&&0===t.length||!this._container)return;const n=function(e,t){let n=e[0],r=0;for(const i of e){const e=Po(i,t);e>r?(r=e,n=i):e===r&&(n=Eo(i)<Eo(n)?i:n)}return n}(Lo(t||[]),this._container);this._rmpVast.creative.mediaUrl=n.fileURL,this._rmpVast.creative.height=n.height,this._rmpVast.creative.width=n.width,this._rmpVast.creative.type=n.mimeType,this._rmpVast.rmpVastAdPlayer&&this._rmpVast.rmpVastAdPlayer.append(n.fileURL,n.mimeType)}}function Uo(){return So()||function(){const e=No()??"";return!(So()||!Fi()||!/android/i.test(e))}()||Io()}function Mo(e){e&&(e.style.display="none")}class jo{_rmpVast;_adContainer;_params;_adPlayer;_contentWrapper;_onTimeUpdateFn=null;_onProgressFn=null;_onPlayButtonClickFn=null;constructor(e){this._rmpVast=e,this._params=e.params,this._adContainer=e.adContainer,this._contentWrapper=e.contentWrapper,this._adPlayer=null,this._onTimeUpdateFn=null,this._onProgressFn=null,this._onPlayButtonClickFn=null}destroy(){this._rmpVast.rmpVastLinearCreative&&this._rmpVast.rmpVastLinearCreative.destroy(),this._onTimeUpdateFn&&this._adPlayer?.removeEventListener("timeupdate",this._onTimeUpdateFn),this._onProgressFn&&this._adPlayer?.removeEventListener("progress",this._onProgressFn),this._onPlayButtonClickFn&&this._adPlayer?.removeEventListener("click",this._onPlayButtonClickFn),this._rmpVast.trackings?.destroy(),Mo(this._adContainer);try{this._adPlayer&&(this._adPlayer.pause(),this._adPlayer.removeAttribute("src"),this._adPlayer.load(),Mo(this._adPlayer))}catch(e){console.warn(e)}this._rmpVast.resetVariablesForNewLoadAds(),this._rmpVast.emitEvent(Za.addestroyed)}init(){var e;this._rmpVast.adContainer=this._adContainer=document.createElement("div"),this._adContainer.className="rmp-ad-container",this._contentWrapper?.append(this._adContainer),Mo(this._adContainer),this._adPlayer=this._rmpVast.__adPlayer,e=this._adPlayer,Co.forEach((t=>{e?.addEventListener(t,(e=>{}))})),Uo()&&this._adPlayer?.load(),(So()||function(){const e=No()??"";return!(So()||Io()||!/(macintosh|mac\s+os)/i.test(e))}()||Io())&&(this._onTimeUpdateFn=this._onTimeUpdate.bind(this),this._adPlayer?.addEventListener("timeupdate",this._onTimeUpdateFn),this._onProgressFn=this._onProgress.bind(this),this._adPlayer?.addEventListener("progress",this._onProgressFn)),this._rmpVast.__initialized=!0}append(e,t){if(!this._adPlayer)throw new Error("AdPlayer: missing ad player");e&&t&&this._rmpVast.rmpVastLinearCreative&&this._rmpVast.rmpVastLinearCreative.update(e,t),this._rmpVast.trackings?.wire()}appendPlayButton(){const e=document.createElement("div");e.className="rmp-ad-container-play-button",e.style.cssText="width: 136px; height: 136px; border-radius: 100%; background-color: rgb(255 255 255 / 12%); position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; justify-content: center; align-items: center;",e.dataset.testid="play-button";const t=document.createElement("img");t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKESURBVHgB7dztcdNAEIDhNUMBKcHpIKkAUgFDBTgV4FRgUwGhAkMFmApsKiBUIHUAHSy7IzyRE9uxpDt93fvM7Ezy9/bjzmdZIgAAAAAAAAAAjIOqXlls9JH/PRXE5wtt8UcPW5GIyJ5U/iGZxQdBHHo+T8Q7QVha3UoZS+FofUtBc9pMpuwPzWgY35WxVI+G9ZlEVKThZTqisTSRyHzFJI7c4mYymeQyYK9kuKYW3g0rxtIJ2g6/6lgKntN2ZcqxdZ92Y6UDGUtD3oTP8cni3jbqv5Iq7V6mPR5LY++AsgeL9307tg75GFrVlfTw2JpSAnZmFpu+jKWURtAhucXcxtIP6UiKHVA2tVh3OZZST8DOTIr9YSktIwH7Fm0fW1PfA05ZW9zFPraSgJfdW3yJlQgScJ7cYmlJ+CaBkYBqcgn8JRCbcDVTKU5LcwmEDqjHb1cvQ9yy0gH1XFgEeYySBHSMBNT3WwIgAfV8tfn/IAGQgOr8g9mdBPJacK7cYmaV/1MCogPO41V/HXrxHR1wWi4Rqr6MDjguWtWX0QHP+elmHnvhd+iAfX7jed3W4js6oLCV4suXIGf7KlLvAL9M83Fz08Xiu5Q7YGtx2/WTcil2QLnqc+lYah2wlR5UfVkqHdCrqi9LoQO20rOqLxtzB/S26svG2gH+UNXtEH4ZM7YE+IL7wq9lIMY0gvzy7HJIi+/G0AG5RL4yHjSNy1/ecSE4TuPILN4IXqbhUfVVaDiZUvXVaRhUfV3azC+l6pvR+haC5rS6jcWVIIwKC+8vXfooCEuPv7j7adVPBeHZwi6o+o5p8eJVqv6A6L8R29Hizehv//+75vIMAAAAAAAAAIDW/AMZppzFSmxZ4wAAAABJRU5ErkJggg==",t.width=96,t.height=96,e.append(t),this._adContainer?.append(e),this._onPlayButtonClickFn=this._onPlayButtonClick.bind(this),this._adPlayer?.addEventListener("click",this._onPlayButtonClickFn,{once:!0});const n=setTimeout((()=>{this._rmpVast.processVastErrors(Fo[400].code,!0)}),8e3);this._adPlayer?.addEventListener("playing",(()=>{e.remove(),clearTimeout(n)}),{once:!0})}_onPlayButtonClick(){this._adPlayer?.play();const e=this._adContainer?.querySelector(".rmp-ad-container-play-button");e&&e.remove()}_onTimeUpdate(){this._adPlayer&&this.lastBufferedTime<this._adPlayer.currentTime&&this._adPlayer?.pause()}_onProgress(){this._adPlayer&&this.lastBufferedTime>this._adPlayer.currentTime&&this._adPlayer.paused&&this._adPlayer.play()}set volume(e){this._adPlayer&&(this._adPlayer.volume=e)}get volume(){return this._adPlayer?this._adPlayer.volume:-1}set muted(e){this._adPlayer&&(e&&!this._adPlayer.muted?this._adPlayer.muted=!0:!e&&this._adPlayer.muted&&(this._adPlayer.muted=!1))}get muted(){return!!this._adPlayer&&this._adPlayer.muted}get duration(){return this._adPlayer&&Number.isFinite(this._adPlayer.duration)?this._adPlayer.duration*_:-1}get currentTime(){return this._adPlayer&&Number.isFinite(this._adPlayer.currentTime)?this._adPlayer.currentTime*_:-1}get lastBufferedTime(){if(this._adPlayer?.buffered&&this._adPlayer.buffered.length>0){const e=this._adPlayer.buffered?this._adPlayer.buffered.end(this._adPlayer.buffered.length-1):void 0;if(void 0!==e)return e}return 1/0}play(e){this._adPlayer?.paused&&this._rmpVast.playPromise(e)}pause(){this._adPlayer&&!this._adPlayer.paused&&this._adPlayer.pause()}}function zo(e,t=2){return String(e).padStart(t,"0")}const Wo=23,$o=3;function qo(e,t){if(!/\[.+?]/i.test(e))return e;let n=e;const r=/\[timestamp]/gi,i=(new Date).toISOString();r.test(n)&&(n=n.replace(r,encodeURIComponent(i)));const a=/\[mediaplayhead]/gi,o=t??-1;return a.test(n)&&o>-1&&(n=n.replace(a,encodeURIComponent(function(e){if(!Number.isFinite(e)||e<0)return"00:00:00.000";const t=zo(Math.floor(e%_),$o);let n=Math.floor(e/_);const r=Math.floor(n/h),i=Math.floor(r/m);n%=h;const a=zo(n),o=zo(r%m);return`${zo(i>Wo?0:i)}:${o}:${a}.${t}`}(o)))),n}const Ho={ajaxTimeout:5e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,vastXmlInput:!1,enableVpaid:!1,pauseOnEnd:!1,timeEvents:{}};class Xo{_rmpVast;_adPlayer;_onPauseFn=null;_onPlayFn=null;_onPlayingFn=null;_onEndedFn=null;_onVolumeChangeFn=null;_onTimeupdateFn=null;constructor(e){this._rmpVast=e,this._adPlayer=e.__adPlayer}_dispatch(e){const t=this._rmpVast.trackingTags.filter((t=>e===t.event));t.length>0&&t.forEach((e=>{this.pingURI(e.url)}))}_ping(e){(function(e,t,n,r=0){return new Promise(((i,a)=>{const o=function(r){const s=new XMLHttpRequest;s.open("GET",e,!0),s.timeout=t,n&&(s.withCredentials=!0),s.onloadend=()=>{"number"==typeof s.status&&s.status>=200&&s.status<=299?i("XMLHttpRequest request succeeded"):r<1||"number"!=typeof r?a(`XMLHttpRequest wrong status code: ${s.status}`):o(r-1)},s.ontimeout=()=>{r<1||"number"!=typeof r?a("XMLHttpRequest timeout"):o(r-1)},s.send(null)};o(r)}))})(e,this._rmpVast.params.ajaxTimeout??5e3,!1,2).then((()=>{})).catch((e=>{}))}_onVolumeChange(){this._adPlayer?.muted||0===this._adPlayer?.volume?(this._rmpVast.emitEvent(Za.advolumemuted),this.dispatch("mute")):!this._adPlayer?.muted&&void 0!==this._adPlayer?.volume&&this._adPlayer.volume>0&&this.dispatch("unmute"),this._rmpVast.emitEvent(Za.advolumechanged)}_onTimeupdate(){let e=-1,t=-1;this._rmpVast.rmpVastAdPlayer&&(t=this._rmpVast.rmpVastAdPlayer.currentTime,e=this._rmpVast.rmpVastAdPlayer.duration),t>0&&e>0&&e>t&&(t>=.25*e&&!this._rmpVast.firstQuartileEventFired?(this._rmpVast.firstQuartileEventFired=!0,this._rmpVast.emitEvent(Za.adfirstquartile),this.dispatch("firstQuartile")):t>=.5*e&&!this._rmpVast.midpointEventFired?(this._rmpVast.midpointEventFired=!0,this._rmpVast.emitEvent(Za.admidpoint),this.dispatch("midpoint")):t>=.75*e&&!this._rmpVast.thirdQuartileEventFired&&(this._rmpVast.thirdQuartileEventFired=!0,this._rmpVast.emitEvent(Za.adthirdquartile),this.dispatch("thirdQuartile")),t>=2e3&&!this._rmpVast.progressEventFired&&(this._rmpVast.progressEventFired=!0,this._rmpVast.emitEvent(Za.adprogress),this.dispatch("progress-2")),Object.entries(this._rmpVast.params.timeEvents||{}).forEach((([n,r])=>{(e=>"string"==typeof e&&["showActionButton","enableCloseButton","showPackshot"].includes(e))(n)&&!this._rmpVast.timeEventsFired[n]&&((e,t,n)=>e<0&&t>=n+e||e>=0&&t>=e)(r,t,e)&&(this._rmpVast.timeEventsFired[n]=!0,this._rmpVast.emitEvent(n))})))}_onPause(){if(this._adPlayer?.paused){if(this._adPlayer.currentTime===this._adPlayer.duration)return;this._rmpVast.emitEvent(Za.adpaused),this.dispatch("pause")}}_onPlay(){this._adPlayer&&!this._adPlayer.paused&&0!==this._adPlayer.currentTime&&(this._rmpVast.emitEvent(Za.adresumed),this.dispatch("resume"))}_onPlaying(){this._rmpVast.emitEvent([Za.adimpression,Za.adstarted]),this.dispatch(["start","creativeView","impression"])}_onEnded(){this._rmpVast.emitEvent(Za.adcomplete),this.dispatch("complete"),this._rmpVast.rmpVastAdPlayer&&(this._rmpVast.params.pauseOnEnd?this._adPlayer?.pause():this._rmpVast.rmpVastAdPlayer?.destroy())}pingURI(e){const t=qo(e,this._rmpVast.rmpVastAdPlayer?.currentTime);this._ping(t)}error(e,t){let n=this._rmpVast.adErrorTags;e===Do[303].code&&this._rmpVast.vastErrorTags.length>0&&(n=[...n,...this._rmpVast.vastErrorTags]),n.length>0&&n.forEach((n=>{if(n.url){let r=n.url;const i=/\[errorcode]/gi;if(i.test(r)&&Number.isFinite(e)&&e>0&&e<1e3&&(r=r.replace(i,String(e))),t){const e=JSON.stringify(t),n=encodeURIComponent(e),i=`${r}${r.includes("?")?"&":"?"}extra=${n}`;r=i}this._ping(r)}}))}dispatch(e){Array.isArray(e)?e.forEach((e=>{this._dispatch(e)})):this._dispatch(e)}destroy(){this._onPauseFn&&this._adPlayer?.removeEventListener("pause",this._onPauseFn),this._onPlayFn&&this._adPlayer?.removeEventListener("play",this._onPlayFn),this._onPlayingFn&&this._adPlayer?.removeEventListener("playing",this._onPlayingFn),this._onEndedFn&&this._adPlayer?.removeEventListener("ended",this._onEndedFn),this._onVolumeChangeFn&&this._adPlayer?.removeEventListener("volumechange",this._onVolumeChangeFn),this._onTimeupdateFn&&this._adPlayer?.removeEventListener("timeupdate",this._onTimeupdateFn)}wire(){this._adPlayer&&this._rmpVast.creative.isLinear&&(this._onPauseFn=this._onPause.bind(this),this._onPlayFn=this._onPlay.bind(this),this._onPlayingFn=this._onPlaying.bind(this),this._onEndedFn=this._onEnded.bind(this),this._onVolumeChangeFn=this._onVolumeChange.bind(this),this._onTimeupdateFn=this._onTimeupdate.bind(this),this._adPlayer.addEventListener("pause",this._onPauseFn),this._adPlayer.addEventListener("play",this._onPlayFn),this._adPlayer.addEventListener("playing",this._onPlayingFn,{once:!0}),this._adPlayer.addEventListener("ended",this._onEndedFn,{once:!0}),this._adPlayer.addEventListener("volumechange",this._onVolumeChangeFn),this._adPlayer.addEventListener("timeupdate",this._onTimeupdateFn))}}const Go=["MEDIAPLAYHEAD","TIMESTAMP"];function Jo(e,t){const n=(e=Yo(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;let r=n.filter((e=>Go.includes(e)));return 0===r.length?e:(r=r.reduce(((e,t)=>(e[t]=-1,e)),{}),Yo(e,r))}function Yo(e,t){let n=e;for(const r in t){const e=t[r];n=n.replace(new RegExp(`(?:\\[|%%)(${r})(?:\\]|%%)`,"g"),e)}return n}function Zo(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(g)}`))}const Ko={track:function(e,t,n){(function(e,t={},n={}){const r=[],i=function(e){if(Array.isArray(e))return e.map((e=>Object.prototype.hasOwnProperty.call(e,"url")?e.url:e));if("string"==typeof e)return[e];return[]}(e);!t.ERRORCODE||n.isCustomCode||/^\d{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900);t.TIMESTAMP=(new Date).toISOString();for(const a in t)t[a]=Zo(t[a]);for(const a in i){const e=i[a];"string"==typeof e&&r.push(Jo(e,t))}return r})(e,t,n).forEach((e=>{if(window){(new Image).src=e}}))}};const Qo={childByName:function(e,t){const n=e.childNodes;for(const r in n){const e=n[r];if(e.nodeName===t)return e}},childrenByName:function(e,t){const n=[],r=e.childNodes;for(const i in r){const e=r[i];e.nodeName===t&&n.push(e)}return n},parseBoolean:function(e){return["true","TRUE","True","1"].includes(e)},parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){const r=t.getAttribute(e);r&&n.setAttribute(e,r)},parseAttributes:function(e){const t=e.attributes,n={};for(const r of t)n[r.nodeName]=r.nodeValue;return n},parseDuration:function(e){if(null==e)return-1;const t=e.split(":");if(3!==t.length)return-1;const n=t[2].split(".");let r=Number.parseInt(n[0],10);2===n.length&&(r+=Number.parseFloat(`0.${n[1]}`));const i=Number.parseInt(t[1]*h,10),a=Number.parseInt(t[0]*h*m,10);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(r)||i>h*m||r>h?-1:a+i+r}};function es(e,t){let n;const r=function(e={}){const{id:t,adId:n,apiFramework:r}=function(e={}){return{id:e.id||null,adId:e.adId||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}(e);return{id:t,adId:n,apiFramework:r,type:"linear",duration:0,skipDelay:null,mediaFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],trackingEvents:{}}}(t);r.duration=Qo.parseDuration(Qo.parseNodeText(Qo.childByName(e,"Duration")));const i=e.getAttribute("skipoffset");if(null==i)r.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==r.duration){const e=Number.parseInt(i,10);r.skipDelay=r.duration*(e/f)}else r.skipDelay=Qo.parseDuration(i);const a=Qo.childByName(e,"VideoClicks");if(a){const e=Qo.childByName(a,"ClickThrough");r.videoClickThroughURLTemplate=e?{id:e.getAttribute("id")||null,url:Qo.parseNodeText(e)}:null,Qo.childrenByName(a,"ClickTracking").forEach((e=>{r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Qo.parseNodeText(e)})}))}return Qo.childrenByName(e,"TrackingEvents").forEach((e=>{Qo.childrenByName(e,"Tracking").forEach((e=>{let t=e.getAttribute("event");const i=Qo.parseNodeText(e);if(t&&i){if("progress"===t){if(n=e.getAttribute("offset"),!n)return;t="%"===n.charAt(n.length-1)?`progress-${n}`:`progress-${Math.round(Qo.parseDuration(n))}`}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i)}}))})),Qo.childrenByName(e,"MediaFiles").forEach((e=>{Qo.childrenByName(e,"MediaFile").forEach((e=>{r.mediaFiles.push(function(e){const t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=Qo.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=Number.parseInt(e.getAttribute("fileSize")||0,10),t.bitrate=Number.parseInt(e.getAttribute("bitrate")||0,10),t.minBitrate=Number.parseInt(e.getAttribute("minBitrate")||0,10),t.maxBitrate=Number.parseInt(e.getAttribute("maxBitrate")||0,10),t.width=Number.parseInt(e.getAttribute("width")||0,10),t.height=Number.parseInt(e.getAttribute("height")||0,10);const n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=Qo.parseBoolean(n));const r=e.getAttribute("maintainAspectRatio");r&&"string"==typeof r&&(t.maintainAspectRatio=Qo.parseBoolean(r));return t}(e))}))})),r}function ts(e){const t=[];return e.forEach((e=>{const n=ns(e);n&&t.push(n)})),t}function ns(e){if("#comment"===e.nodeName)return null;const t={name:null,value:null,attributes:{},children:[]};return t.name=e.nodeName,function(e,t){const n=e.attributes;if(!n)return;for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const e=n[r];e.nodeName&&e.nodeValue&&(t.attributes[e.nodeName]=e.nodeValue)}}(e,t),function(e,t){const n=e.childNodes;for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const e=ns(n[r]);e&&t.children.push(e)}}(e,t),function(e,t){if(0===t.children.length||1===t.children.length&&["#cdata-section","#text"].includes(t.children[0].name)){const n=Qo.parseNodeText(e);""!==n&&(t.value=n),t.children=[]}}(e,t),null===(n=t).value&&0===Object.keys(n.attributes).length&&0===n.children.length?null:t;var n}function rs(e){const t=[];return e.forEach((e=>{const n={id:e.getAttribute("id")||null,adId:is(e),apiFramework:e.getAttribute("apiFramework")||null},r=[];let i;Qo.childrenByName(e,"UniversalAdId").forEach((e=>{const t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:Qo.parseNodeText(e)};r.push(t)}));const a=Qo.childByName(e,"CreativeExtensions");a&&(i=ts(Qo.childrenByName(a,"CreativeExtension")));for(const o in e.childNodes){const a=e.childNodes[o];let s;switch(a.nodeName){case"Linear":s=es(a,n);break;case"NonLinearAds":throw new Error("NonLinear ads are not supported");case"CompanionAds":throw new Error("CompanionAds ads are not supported")}s&&(r&&(s.universalAdIds=r),i&&(s.creativeExtensions=i),t.push(s))}})),t}function is(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}const as={Wrapper:{subElements:["VASTAdTagURI","Impression"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},UniversalAdId:{attributes:["idRegistry"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},StaticResource:{attributes:["creativeType"]}};function os(e,t){if(!as[e.nodeName]?.attributes)return;const n=as[e.nodeName].attributes.filter((t=>!e.getAttribute(t)));n.length>0&&ls({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n},t)}function ss(e,t,n){const r=as[e.nodeName],i=!n&&"Wrapper"!==e.nodeName;if(!r||i)return;if(r.subElements){const n=r.subElements.filter((t=>!Qo.childByName(e,t)));n.length>0&&ls({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:n},t)}if(!n||!r.oneOfinLineResources)return;r.oneOfinLineResources.some((t=>Qo.childByName(e,t)))||ls({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t)}function cs(e){return e.children&&e.children.length>0}function ls({name:e,parentName:t,attributes:n,subElements:r,oneOfResources:i},a){let o=`Element '${e}'`;o+=n?` missing required attribute(s) '${n.join(", ")}' `:r?` missing required sub element(s) '${r.join(", ")}' `:i?` must provide one of the following '${i.join(", ")}' `:" is empty",a("VAST-warning",{message:o,parentElement:t,specVersion:4.1})}const ds={verifyRequiredValues:function e(t,n,r){if(t?.nodeName)if("InLine"===t.nodeName&&(r=!0),os(t,n),cs(t)){ss(t,n,r);for(const i of t.children)e(i,n,r)}else 0===Qo.parseNodeText(t).length&&ls({name:t.nodeName,parentName:t.parentNode.nodeName},n)},hasSubElements:cs,emitMissingValueWarning:ls,verifyRequiredAttributes:os,verifyRequiredSubElements:ss};function us(e,t){const n=e.childNodes;for(const r in n){const i=n[r];if(["InLine"].includes(i.nodeName))return Qo.copyNodeAttribute("id",e,i),Qo.copyNodeAttribute("adType",e,i),{ad:ps(i,t),type:"INLINE"}}}function ps(e,t){return function(e,t){t&&ds.verifyRequiredValues(e,t);const n=e.childNodes,r=function(e={}){return{id:e.id||null,adType:e.adType||null,adServingId:null,system:null,title:null,description:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(Qo.parseAttributes(e));for(const i in n){const e=n[i];switch(e.nodeName){case"Error":r.errorURLTemplates.push(Qo.parseNodeText(e));break;case"Impression":r.impressionURLTemplates.push({id:e.getAttribute("id")||null,url:Qo.parseNodeText(e)});break;case"Creatives":r.creatives=rs(Qo.childrenByName(e,"Creative"));break;case"Extensions":{const t=Qo.childrenByName(e,"Extension");r.extensions=ts(t);break}case"AdSystem":r.system={value:Qo.parseNodeText(e),version:e.getAttribute("version")||null};break;case"AdTitle":r.title=Qo.parseNodeText(e);break;case"AdServingId":r.adServingId=Qo.parseNodeText(e);break;case"Description":r.description=Qo.parseNodeText(e)}}return r}(e,t)}const _s={ERRORCODE:900,extensions:[]};class hs{constructor(e){this.remainingAds=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.URLTemplateFilters=[],this.emit=(t,n)=>{e(t,n)}}_trackVastError(e,t,...n){this.emit("VAST-error",Object.assign({},_s,t,...n)),Ko.track(e,t)}_getErrorURLTemplates(){return[...this.rootErrorURLTemplates,...this.errorURLTemplates]}_initParsingStatus(){this.errorURLTemplates=[],this.remainingAds=[],this.rootErrorURLTemplates=[],this.vastVersion=null}parseVAST(e){return this._initParsingStatus(),this._parse(e).then((e=>this.buildVASTResponse(e)))}buildVASTResponse(e){const t={ads:e,errorURLTemplates:this._getErrorURLTemplates(),version:this.vastVersion};return this._reportPossibleParsingErrors(t),t}_parseVastXml(e){if(!e?.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR"}),new Error("Invalid VAST XMLDocument");const t=[],n=e.documentElement.childNodes,r=e.documentElement.getAttribute("version");r&&(this.vastVersion=r);for(const i in n){const e=n[i];if("Error"===e.nodeName){const t=Qo.parseNodeText(e);this.rootErrorURLTemplates.push(t)}else if("Ad"===e.nodeName){if(t.length>1)throw new Error("VAST document must contain one Ad");const n=us(e,this.emit.bind(this));n.ad?(t.push(n.ad),this.emit("VAST-ad-parsed",{type:n.type})):this._trackVastError(this._getErrorURLTemplates(),{ERRORCODE:101})}}return t}_parse(e){let t=[];try{t=this._parseVastXml(e)}catch(n){return Promise.reject(n)}return Promise.resolve(t)}_reportPossibleParsingErrors(e){if(0===e.ads.length)this._trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(let t=e.ads.length-1;t>=0;t--){const n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this._trackVastError([...n.errorURLTemplates,...e.errorURLTemplates],{ERRORCODE:n.errorCode||Do[303].code},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}class ms{_EventEmitter;container=null;contentWrapper=null;__adPlayer=null;adContainer=null;params={};__initialized=!1;__adOnStage=!1;__adErrorMessage="";__adErrorType="";__vastErrorCode=-1;timeEventsFired={};trackings=null;trackingTags=[];vastErrorTags=[];adErrorTags=[];creative={};progressEvents=[];ad={};rmpVastAdPlayer=null;rmpVastLinearCreative=null;firstQuartileEventFired=!1;midpointEventFired=!1;progressEventFired=!1;thirdQuartileEventFired=!1;constructor(e,t){this._EventEmitter=new _t(qe,eo),this.initInstanceVariables(),e instanceof HTMLElement&&(this.container=e,this.contentWrapper=this.container.querySelector(".rmp-content"),this.__adPlayer=this.container.querySelector(".rmp-video"),this.container&&null!==this.contentWrapper&&null!==this.__adPlayer&&(this.resetVariablesForNewLoadAds(),this.params=function(e){if(!e||"object"!=typeof e)return Ho;const t={...Ho};return pt(e).forEach((n=>{const r=e[n];typeof r==typeof t[n]&&("number"==typeof r&&Number.isFinite(r)&&r>0||"number"!=typeof r)&&(t[n]=r)})),t}(t)))}initInstanceVariables(){this.adContainer=null,this.contentWrapper=null,this.container=null,this.rmpVastAdPlayer=null,this.params={},this.__adPlayer=null,this.__initialized=!1}resetVariablesForNewLoadAds(){this.trackingTags=[],this.vastErrorTags=[],this.adErrorTags=[],this.firstQuartileEventFired=!1,this.midpointEventFired=!1,this.progressEventFired=!1,this.thirdQuartileEventFired=!1,this.ad={},this.creative={},this.progressEvents=[],this.rmpVastLinearCreative=null,this.__vastErrorCode=-1,this.__adErrorType="",this.__adErrorMessage="",this.__adOnStage=!1,this.timeEventsFired={}}emitEvent(e){Array.isArray(e)?e.forEach((e=>{e&&this._EventEmitter.emit(e)})):e&&this._EventEmitter.emit(e)}on(e,t){this._EventEmitter.on(e,t)}off(e,t){this._EventEmitter.off(e,t)}_addTrackingEvents(e){Object.keys(e).forEach((t=>{e[t].forEach((e=>{this.trackingTags.push({event:t,url:e})}))}))}_loopAds(e){for(const t of e){this.ad.id=t.id,this.ad.adServingId=t.adServingId,this.ad.adType=t.adType,this.ad.title=t.title,this.ad.description=t.description,this.ad.system=t.system,t.errorURLTemplates?.forEach((e=>{this.adErrorTags.push({event:"error",url:e})})),t.impressionURLTemplates?.forEach((e=>{e.url&&this.trackingTags.push({event:"impression",url:e.url})}));const e=t.creatives||[];for(const t of e)this.creative.id=t.id,this.creative.universalAdIds=t.universalAdIds,this.creative.adId=t.adId,this.creative.trackingEvents=t.trackingEvents,this.creative.duration=t.duration,this.creative.skipDelay=t.skipDelay,this.creative.skipDelay&&(this.creative.skipoffset=t.skipDelay,this.creative.isSkippableAd=!0),t.videoClickThroughURLTemplate?.url&&(this.creative.clickThroughUrl=t.videoClickThroughURLTemplate.url),t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length>0&&t.videoClickTrackingURLTemplates.forEach((e=>{e.url&&this.trackingTags.push({event:"clickthrough",url:e.url})})),this.creative.isLinear=!0,this._addTrackingEvents(t.trackingEvents||{}),this.rmpVastLinearCreative=new Bo(this),this.rmpVastLinearCreative.parse(t)}}_handleParsedVast(e){e.errorURLTemplates.length>0&&e.errorURLTemplates.forEach((e=>{this.vastErrorTags.push({event:"error",url:e})})),0!==e.ads.length?this._loopAds(e.ads):this.processVastErrors(Do[303].code,!0)}_getVastTag(e){if("string"==typeof e&&""!==e)if("undefined"!=typeof DOMParser){if(this.emitEvent(Za.adtagstartloading),!this.params.vastXmlInput)throw new Error("VAST XML input is required. VAST loading by URI is not supported");{let n;try{n=(new DOMParser).parseFromString(e,"text/xml")}catch(t){return console.warn(t),void this.processVastErrors(Do[900].code,!0)}new hs(((e,t)=>{"VAST-error"!==e&&"ERROR"!==t.type||this.processVastErrors(Do[900].code,!0)})).parseVAST(n).then((e=>{this.emitEvent(Za.adtagloaded),this._handleParsedVast(e)})).catch((e=>{console.warn(e),this.processVastErrors(Do[900].code,!0)}))}}else this.processVastErrors(Fo[1002].code,!1);else this.processVastErrors(Do[1001].code,!1)}loadAds(e){if(this.__initialized||this.initialize(),this.__adOnStage)throw new Error("Creative already on stage, cannot load VAST");this._getVastTag(e)}playPromise(e){const t=this.__adPlayer;if(t){const n=t.play();null!=n&&n.then((()=>{e&&this.emitEvent(Za.adinitialplayrequestsucceeded)})).catch((t=>{console.warn(t),e&&this.creative.isLinear&&(this.emitEvent(Za.adinitialplayrequestfailed),this.rmpVastAdPlayer?.appendPlayButton())}))}}play(){this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer&&this.rmpVastAdPlayer?.play()}pause(){this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer&&this.rmpVastAdPlayer.pause()}destroy(){this.rmpVastAdPlayer&&this.rmpVastAdPlayer.destroy(),this.initInstanceVariables()}_updateVastError(e){const t=e in Do?Do[e]:void 0,n=(e in Fo?Fo[e]:void 0)||t;n?(this.__vastErrorCode=n.code,this.__adErrorMessage=n.description,this.__adErrorType=t?"adLoadError":"adPlayError"):(this.__vastErrorCode=-1,this.__adErrorMessage="Error getting VAST error")}processVastErrors(e,t,n){t&&this.trackings?.error(e,n),this._updateVastError(e),this.emitEvent(Za.aderror),this.rmpVastAdPlayer&&this.rmpVastAdPlayer.destroy()}get adPaused(){return!!(this.__adOnStage&&this.creative?.isLinear&&this.__adPlayer)&&this.__adPlayer.paused}set volume(e){if(!Number.isFinite(e))return;let t;t=e<0?0:e>1?1:e,this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.volume=t)}get volume(){return this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer?this.rmpVastAdPlayer.volume:-1}set muted(e){"boolean"==typeof e&&this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.muted=e)}get muted(){return!(this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer)||this.rmpVastAdPlayer.muted}get adDuration(){return this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer?this.rmpVastAdPlayer.duration:-1}get adCurrentTime(){return this.__adOnStage&&this.creative?.isLinear&&this.rmpVastAdPlayer?this.rmpVastAdPlayer.currentTime:-1}get clickThroughUrl(){return this.creative?.clickThroughUrl?this.creative.clickThroughUrl:""}get isSkippableAd(){return!!this.creative?.isSkippableAd}get adSkippableState(){return!!(this.__adOnStage&&this.isSkippableAd&&this.rmpVastLinearCreative)&&this.rmpVastLinearCreative.skippableAdCanBeSkipped}initialize(){this.__initialized||(this.rmpVastAdPlayer=new jo(this),this.trackings=new Xo(this),this.rmpVastAdPlayer.init())}}const fs=Lr((({setPlayerContext:e,playerRef:t,vast:n,setClickUrl:r,setIsPackshotVisible:i,packshotDuration:a,setIsActionButtonVisible:o})=>{const s=yr(null),c=oi(),d=Ia(),u=kr((e=>{const n=t.current;null!==n&&(n.adPaused?n.play():d&&n.pause()),e.preventDefault(),e.stopPropagation()}),[d,t]);return vr((()=>{null===t.current&&null!==s.current&&(t.current=new ms(s.current,{vastXmlInput:!0,pauseOnEnd:!0,timeEvents:{showActionButton:5e3,enableCloseButton:$a,showPackshot:-500}}),t.current.initialize(),t.current.on(Za.adstarted,(()=>{r(t.current?.clickThroughUrl??""),c.emit(Wt.onStart,{once:!0})})),t.current.on(Za.aderror,(()=>{c.emit(zt.playerError)})),t.current.on(Ka.showActionButton,(()=>{o(!0)})),t.current.loadAds(n),e(t.current))}),[c,t,e,r,n,o]),vr((()=>{const e=()=>{t.current?.play()},n=()=>{t.current?.pause()},r=()=>{t.current?.adPaused&&setTimeout((()=>t.current?.play()),500)},i=()=>{t.current?.destroy()};return c.on(zt.play,e),c.on(zt.pause,n),c.on(zt.leave,n),c.on(zt.return,r),c.on(zt.finalDestroy,i),()=>{c.off(zt.play,e),c.off(zt.pause,n),c.off(zt.leave,n),c.off(zt.return,r),c.off(zt.finalDestroy,i)}}),[c,t]),(({packshotDuration:e,setIsPackshotVisible:t})=>{const n=Ha(),r=oi(),i=ki()===l.InterstitialFullscreen,a=yr(null);vr((()=>{const o=()=>{t(!0),a.current=new Ma({callbacks:{endCallback:()=>{r.emit(i?Wt.onComplete:zt.showNextBanner)}},endTime:e/_})};return n&&n.on(Za.adcomplete,o),()=>{n&&n.off(Za.adcomplete,o)}}),[r,e,i,n,t]),vr((()=>{const e=()=>{a.current?.destroy()},t=()=>{a.current?.resume()},n=()=>{a.current?.stop()};return r.on(zt.finalDestroy,e),r.on(zt.play,t),r.on(zt.pause,n),()=>{r.off(zt.finalDestroy,e),r.off(zt.play,t),r.off(zt.pause,n)}}),[r,a])})({packshotDuration:a,setIsPackshotVisible:i}),fi("div",{className:"rmp-container adsgram",ref:s,onClick:u,children:fi("div",{className:"rmp-content",children:fi("video",{className:"rmp-video",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",muted:!0,playsInline:!0,controls:!1,disableRemotePlayback:!0,disablePictureInPicture:!0,preload:"auto"})})})}));function gs({vast:e,playerRef:t,actionButtonTitle:n,image:r,hasPackshot:i,duration:a,title:o,description:s,kebab:c}){const[l,d]=br(null),[u,p]=br(""),[_,h]=br(!1),[m,f]=br(!1),g=Ca();return fi(qa.Provider,{value:l,children:fi("div",{className:tr(mo.wrapper,{[mo.desktop]:g}),children:[fi(po,{kebab:c,packshotDuration:a??0}),fi(Xa,{text:n,clickUrl:u,isVisible:m,isPackshotVisible:_}),fi(fs,{vast:e,playerRef:t,setPlayerContext:d,setClickUrl:p,setIsPackshotVisible:h,packshotDuration:a??0,setIsActionButtonVisible:f}),i&&fi(ho,{image:r,duration:a,title:o,description:s,isVisible:_})]})})}const bs="_banner_jvd6s_1",vs="_desktop_jvd6s_10",ys="_preview_jvd6s_17";const ws={task:"_task_1b03o_1","task-kebab":"_task-kebab_1b03o_34",taskKebab:"_task-kebab_1b03o_34",icon:"_icon_1b03o_38","icon-wrapper":"_icon-wrapper_1b03o_46",iconWrapper:"_icon-wrapper_1b03o_46",button:"_button_1b03o_50",title:"_title_1b03o_62",text:"_text_1b03o_67","kebab-icon":"_kebab-icon_1b03o_74",kebabIcon:"_kebab-icon_1b03o_74","kebab-content":"_kebab-content_1b03o_84",kebabContent:"_kebab-content_1b03o_84","kebab-text":"_kebab-text_1b03o_93",kebabText:"_kebab-text_1b03o_93","kebab-close":"_kebab-close_1b03o_98",kebabClose:"_kebab-close_1b03o_98",reward:"_reward_1b03o_103","icon-skeleton":"_icon-skeleton_1b03o_107",iconSkeleton:"_icon-skeleton_1b03o_107","title-skeleton":"_title-skeleton_1b03o_111",titleSkeleton:"_title-skeleton_1b03o_111",skeleton:"_skeleton_1b03o_1"};function ks({legalName:e,inn:t,erid:n,regNumber:r}){return`${e}, ИНН ${t}, ERID ${n}, ОГРН ${r}`}const xs=Or(((e,t)=>ln("svg",{viewBox:"5.67 5.67 12.67 12.67",fill:"#7D8B99",ref:t,...e},ln("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.333a6.333 6.333 0 1 0 0-12.666 6.333 6.333 0 0 0 0 12.666Zm.719-9.356a.72.72 0 1 1-1.44 0 .72.72 0 0 1 1.44 0Zm-2.352 2.16a.48.48 0 0 1 .48-.481h1.296a.48.48 0 0 1 .481.48v3.55h.815a.48.48 0 1 1 0 .961h-2.591a.48.48 0 1 1 0-.961h.815v-3.069h-.815a.48.48 0 0 1-.48-.48Z"}))));function Es({icon:e,title:t,url:n,kebab:r}){const i=sa(r),a=ci(),o=oi(),s=yr(null),[c,l]=br(!1),d=Xi("click"),u=kr((e=>{const t=function(e){const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=e.currentTarget;if(r instanceof HTMLButtonElement){const e=r.getBoundingClientRect();if(t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)return!0}return!1}(e);e.isTrusted&&oa(n)&&!c&&t&&(e.preventDefault(),e.stopPropagation(),Jn(d,a),hi({url:n,logger:et()}),o.emit(zt.sendReward),l(!0))}),[o,d,c,a,n]),[p,_]=br(!1),h=kr((()=>{_((e=>!e))}),[]);return Da({element:s}),ja({sendTackingTime:0,element:s,preventSend:!1,immediateStart:!1}),Ua(),fi("div",{className:tr(ws.task,p&&ws.taskKebab),ref:s,children:[oa(e)?fi(Mi,{className:ws.icon,src:e,alt:"task"}):fi("div",{className:tr(ws.icon,ws.iconSkeleton)}),oa(t)?fi("p",{className:ws.title,children:[fi("span",{className:tr(i&&ws.text),children:t}),i&&fi(xs,{className:ws.kebabIcon,fill:"currentColor",onClick:h})]}):fi("div",{className:ws.titleSkeleton}),fi("div",{className:ws.reward,children:fi("slot",{name:"reward"})}),fi("button",{className:ws.button,onClickCapture:u,children:fi("slot",c?{name:"done",children:"done"}:{name:"button",children:"go"})}),p&&i&&fi("div",{className:ws.kebabContent,children:[fi(qi,{className:ws.kebabClose,onClick:h,fill:"currentColor"}),fi("span",{className:ws.kebabText,children:ks(r)})]})]})}const Ts={[c.RewardedVideo]:function({vast:e,packshotImage:t,actionButtonTitle:n,title:r,description:i,kebab:a}){const o=yr(null),s=Ei("FORCED_SUB_FORMAT"),c=Ca(),l=Ia();return Ua(),fi("div",{className:tr(l?ys:bs,{[vs]:c}),children:fi(gs,{vast:e,playerRef:o,image:t,actionButtonTitle:n,hasPackshot:!0,title:r,description:i,duration:s?15e3:5e3,kebab:a})})},[c.FullscreenMedia]:function({image:e,title:t,description:n,advertiserName:r,buttonName:i,url:a,icon:o,kebab:s}){const c=oi(),d=ci(),u=Xi("click"),p=ki()===l.InterstitialFullscreen,_=Ti(),h=wr((()=>new Ma({callbacks:{endCallback:()=>{c.emit(p?Wt.onComplete:zt.showNextBanner)},3:()=>f(!0),5:()=>b(!0)},endTime:_})),[c,_,p]),[m,f]=br(!1),[g,b]=br(!1),v=yr(1/0),y=kr((e=>{m&&(e.isTrusted?(e.preventDefault(),e.stopPropagation(),Jn(u,d),h.stop(),c.emit(zt.leave),v.current=Date.now(),hi({url:a,logger:d})):c.emit(Wt.onError))}),[m,u,d,h,a,c]),w=yr(null);return ja({sendTackingTime:2,element:w,preventSend:!1}),Da({element:w}),Ua(),vr((()=>{const e=()=>{h.destroy()},t=()=>{h.resume()},n=()=>{h.stop()},r=()=>{Date.now()-v.current>1e4&&c.emit(p?Wt.onComplete:zt.sendReward),v.current=1/0,h.resume()};return c.on(zt.finalDestroy,e),c.on(zt.play,t),c.on(zt.pause,n),c.on(zt.leave,n),c.on(zt.return,r),()=>{c.off(zt.finalDestroy,e),c.off(zt.play,t),c.off(zt.pause,n),c.off(zt.leave,n),c.off(zt.return,r)}}),[c,p,h]),vr((()=>{c.emit(Wt.onStart,{once:!0})}),[c]),fi(Ra,{...{image:e,title:t,description:n,advertiserName:r,buttonName:i,url:a,icon:o,kebab:s,bannerRef:w,onClick:y,isClickable:m,isCloseVisible:g,timer:h}})},[c.RewardTask]:Es};function As(e){const{blockId:t,EventEmitter:n,logger:r,children:i,exp:a,trackings:o,blockType:s,isFullscreen:c,adsProgress:l}=e;return fi(si.Provider,{value:r,children:fi(ir.Provider,{value:n,children:fi(Oa.Provider,{value:t,children:fi(xi.Provider,{value:a,children:fi(wi.Provider,{value:s,children:fi(Hi.Provider,{value:o,children:fi(Ni.Provider,{value:c,children:fi(ka.Provider,{value:l||wa,children:fi(Sa.Provider,{value:!1,children:i})})})})})})})})})}const Ps=["Go!","Install","Open","View","Buy","Subscribe","Play Now!","Play Now!","Join Now!","Follow us!"],Cs={"Go!":{en:"Go!",ru:"Вперёд!",uk:"Вперед!",uz:"Борайлик!",fa:"برو!",ar:"انطلق!",id:"Ayo!",vi:"Đi thôi!",hi:"चलो!","pt-br":"Vá!",tr:"Hadi!",es:"¡Ve!",fr:"Allez!",ko:"가자!","zh-hans":"去吧!","zh-hant":"去吧!",ja:"行け!",de:"Los!",pl:"Idź!"},Install:{en:"Install",ru:"Установить",uk:"Встановити",uz:"O'rnatish",fa:"نصب",ar:"تثبيت",id:"Instal",vi:"Cài đặt",hi:"इंस्टॉल करें","pt-br":"Instalar",tr:"Yükle",es:"Instalar",fr:"Installer",ko:"설치하다","zh-hans":"安装","zh-hant":"安装",ja:"インストール",de:"Installieren",pl:"Zainstaluj"},Open:{en:"Open",ru:"Открыть",uk:"Відкрити",uz:"Ochish",fa:"باز کن",ar:"فتح",id:"Buka",vi:"Mở",hi:"खोलें","pt-br":"Abrir",tr:"Aç",es:"Abrir",fr:"Ouvrir",ko:"열다","zh-hans":"打开","zh-hant":"打开",ja:"開く",de:"Öffnen",pl:"Otwórz"},View:{en:"View",ru:"Посмотреть",uk:"Перегляд",uz:"Ko'rish",fa:"مشاهده",ar:"عرض",id:"Lihat",vi:"Xem",hi:"देखें","pt-br":"Ver",tr:"Görüntüle",es:"Ver",fr:"Voir",ko:"보다","zh-hans":"查看","zh-hant":"查看",ja:"見る",de:"Anzeigen",pl:"Zobacz"},Buy:{en:"Buy",ru:"Купить",uk:"Купити",uz:"Sotib olish",fa:"خریدن",ar:"شراء",id:"Beli",vi:"Mua",hi:"खरीदें","pt-br":"Comprar",tr:"Satın al",es:"Comprar",fr:"Acheter",ko:"사다","zh-hans":"购买","zh-hant":"购买",ja:"買う",de:"Kaufen",pl:"Kup"},Subscribe:{en:"Subscribe",ru:"Подписаться",uk:"Підписатися",uz:"Obuna bo'lish",fa:"اشتراک",ar:"اشترك",id:"Berlangganan",vi:"Đăng ký",hi:"सदस्यता लें","pt-br":"Inscrever-se",tr:"Abone ol",es:"Suscribirse",fr:"S'abonner",ko:"구독하다","zh-hans":"订阅","zh-hant":"订阅",ja:"購読する",de:"Abonnieren",pl:"Subskrybuj"},"Play Now!":{en:"Play Now!",ru:"Играть!",uk:"Грай зараз!",uz:"Hozir o'yna!",fa:"اکنون بازی کن!",ar:"العب الآن!",id:"Mainkan Sekarang!",vi:"Chơi ngay!",hi:"अभी खेलें!","pt-br":"Jogue Agora!",tr:"Şimdi Oyna!",es:"¡Juega ahora!",fr:"Jouez maintenant!",ko:"지금 플레이!","zh-hans":"立即游戏!","zh-hant":"立即游戏!",ja:"今すぐ遊ぶ!",de:"Jetzt spielen!",pl:"Graj teraz!"},"Join Now!":{en:"Join Now!",ru:"Присоединяйся!",uk:"Приєднуйся зараз!",uz:"Hozir qo'shiling!",fa:"اکنون بپیوندید!",ar:"انضم الآن!",id:"Bergabung Sekarang!",vi:"Tham gia ngay!",hi:"अभी शामिल हों!","pt-br":"Junte-se Agora!",tr:"Şimdi Katıl!",es:"¡Únete ahora!",fr:"Rejoignez maintenant!",ko:"지금 가입하세요!","zh-hans":"立即加入!","zh-hant":"立即加入!",ja:"今すぐ参加！",de:"Jetzt beitreten!",pl:"Dołącz сейчас!"},"Follow us!":{en:"Follow us!",ru:"Подписаться!",uk:"Слідуйте за нами!",uz:"Bizga ergashing!",fa:"ما را دنبال کنید!",ar:"تابعنا!",id:"Ikuti kami!",vi:"Theo dõi chúng tôi!",hi:"हमें फॉलो करें!","pt-br":"Siga-nos!",tr:"Bizi takip et!",es:"¡Síguenos!",fr:"Suivez-nous!",ko:"우리를 팔로우하세요!","zh-hans":"关注我们!","zh-hant":"关注我们!",ja:"フォローしてください！",de:"Folge uns!",pl:"Obserwuj nas!"}};function Ns(e){return function(e){return Ps.includes(e)}(e)?Q(Cs[e]):e}function Ss(e){const t={};for(const n in e){const{name:r,value:i}=e[n];t[r]=i}return t}const Is={title:"",icon:"",url:""};function Rs(e){if(!e)return Is;const{banner:t}=e,{bannerAssets:n}=t,{title:r,icon:i,url:a,erid:o,legalName:s,regNumber:c,inn:l}=Ss(n);return{title:r,icon:i,url:a,kebab:{erid:o,legalName:s,regNumber:c,inn:l}}}const Vs={[c.RewardedVideo]:function({banner:e}){const{bannerAssets:t}=e,{title:n,description:r,buttonName:i,buttonImg:a,vast:o,erid:s,regNumber:c,legalName:l,inn:d}=Ss(t);return{vast:o,packshotImage:a,actionButtonTitle:Ns(i),title:n,description:r,kebab:{erid:s,regNumber:c,legalName:l,inn:d}}},[c.FullscreenMedia]:function({banner:e}){const{bannerAssets:t}=e,{advertiserName:n,buttonName:r,title:i,description:a,icon:o,image:s,url:c,erid:l,legalName:d,regNumber:u,inn:p}=Ss(t);return{advertiserName:n,buttonName:Ns(r),description:a,icon:o,image:s,url:c,title:i,kebab:{erid:l,legalName:d,regNumber:u,inn:p}}},[c.RewardTask]:Rs};function Ls(e){if(!e)return;const t={};for(const n in e){const{name:r,value:i}=e[n];t[r]=i}return t}function Fs({data:e,bannerType:t,blockType:n,blockId:r,EventEmitter:i,logger:a,isFullscreen:o,adsProgress:s}){const c=Ts[t],l=Vs[t](e);return fi(As,{blockId:r,EventEmitter:i,logger:a,exp:Xn(e?.banner?.flags),trackings:Ls(e?.banner?.trackings),blockType:n,isFullscreen:o,adsProgress:s,children:fi($n,{EventEmitter:i,blockId:r,campaignId:e.campaignId,logger:a,children:ln(c,{...l,key:s.bannerIndex})})})}const Ds='._label_1gxvd_1{border-radius:var(--s-spacing);cursor:pointer;padding:0 var(--xs-spacing);position:relative;width:fit-content;z-index:1}._label_1gxvd_1:before{background:var(--adsgram-section-bg-color);border-radius:var(--s-spacing);content:"";inset:0;position:absolute;z-index:-1}._text_1gxvd_19{color:var(--adsgram-link-color);font-size:var(--text-s);font-weight:var(--font-medium);line-height:23px;text-align:center;vertical-align:top}',Os='._wrapper_iup2q_1{background:transparent;display:flex;gap:var(--s-spacing);margin-top:6px;padding:var(--xs-spacing);position:relative}._wrapper_iup2q_1:before{background:var(--adsgram-secondary-bg-color);border-radius:var(--s-spacing);content:"";inset:0;opacity:.5;position:absolute}._icon_iup2q_19{background-color:var(--adsgram-secondary-bg-color);border-radius:100%;height:36px;object-fit:cover;width:36px;z-index:1}._name_iup2q_28{background:none;border:none;display:-webkit-box;overflow:hidden;z-index:1;-webkit-box-orient:vertical;color:var(--adsgram-hint-color);cursor:default;font-size:var(--text-m);font-weight:var(--font-normal);-webkit-line-clamp:2;line-height:18px;text-align:left;text-decoration:none;text-overflow:ellipsis;transition:color .2s cubic-bezier(.2,0,0,1);word-break:break-word}._clickable_iup2q_48{color:var(--adsgram-link-color);cursor:pointer}',Bs="._footer_rjio1_1{align-items:center;display:flex;flex:1 1 auto;flex-direction:column;gap:var(--xs-spacing);justify-content:end;padding:16px 0}",Us='._post_14kt7_1{animation-duration:.1s;animation-fill-mode:forwards;animation-name:_show_14kt7_1;animation-play-state:running;animation-timing-function:ease-out;display:flex;position:relative}@keyframes _show_14kt7_1{0%{opacity:0}to{opacity:1}}._message_14kt7_21{background-color:var(--adsgram-section-bg-color);border-radius:18px 18px 7px 7px;box-shadow:0 1px 2px #00000029;display:flex;flex-direction:column;position:relative;width:100%}._message_14kt7_21._android-dark_14kt7_31{background-color:var(--adsgram-bg-color)}._image_14kt7_35{aspect-ratio:1;border-radius:16px 16px 4px 4px;margin:2px 2px 0;object-fit:cover;width:calc(100% - 4px)}._text_14kt7_43{display:flex;flex-direction:column;font-size:var(--text-m);gap:var(--s-spacing);line-height:18px;margin:var(--s-spacing) var(--m-spacing) 0;width:calc(100% - 32px)}._title_14kt7_53{font-weight:var(--font-medium);letter-spacing:0}._description_14kt7_61,._title_14kt7_53{color:var(--adsgram-text-color);font-size:var(--text-m);line-height:18px}._description_14kt7_61{font-weight:var(--font-normal)}._adlabel_14kt7_68{align-self:end;color:var(--adsgram-hint-color);font-size:12px;line-height:16px;transform:translate(6px,-6px);vertical-align:bottom;white-space:nowrap}._container_14kt7_78{background-color:var(--adsgram-section-bg-color);border-radius:var(--m-spacing);box-shadow:0 1px 2px #0000001a;display:flex;padding:6px;position:absolute;right:6px;top:6px}div._kebab_14kt7_89{align-items:center;height:40px;justify-content:center;position:absolute;width:40px}div._kebab_14kt7_89:before{background-color:var(--adsgram-section-bg-color);border-radius:100%;box-shadow:0 1px 2px #0000001a;content:"";height:28px;position:absolute;width:28px}._kebab-content_14kt7_107{left:40px;top:-4px}',Ms="._button_pbmuc_1{animation-duration:.2s;animation-name:_show_pbmuc_1;animation-timing-function:cubic-bezier(.2,0,0,1);background-color:var(--adsgram-button-color);border:none;border-radius:7px 7px 15px 15px;color:var(--adsgram-button-text-color);cursor:pointer;display:inline-block;flex:0 0 48px;font-size:18px;font-weight:var(--font-medium);height:48px;letter-spacing:.03em;line-height:18px;margin-top:4px;overflow:hidden;padding:0 var(--s-spacing);position:relative;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%;z-index:1}@keyframes _show_pbmuc_1{0%{opacity:0;transform:translateY(-20px) scale(.1)}to{opacity:1;transform:translateY(0) scale(1)}}._button_pbmuc_1:active{transform:scale(.95);transition:.1s}._icon_pbmuc_45{position:absolute;right:1px;top:1px}",js='._close_e8f0c_1{align-items:center;animation-duration:.3s;animation-name:_show_e8f0c_1;animation-play-state:running;animation-timing-function:cubic-bezier(0,0,.46,1.41);cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:0;top:-2px;width:40px;z-index:1}._image_e8f0c_18{height:16px;width:16px}._close_e8f0c_1:before{background:var(--adsgram-section-bg-color);border-radius:100%;box-shadow:0 1px 2px #0000001a;content:"";height:28px;position:absolute;width:28px;z-index:-1}@keyframes _show_e8f0c_1{0%{opacity:0;transform:scale(.1)}to{opacity:1;transform:scale(1)}}',zs='._timeline_1b8xb_1{align-content:center;display:flex;flex-wrap:wrap;height:18px;position:relative;width:100%}._bar_1b8xb_10{border-radius:var(--xxxs-spacing);height:2px;position:relative;width:100%}._bar_1b8xb_10:after{background-color:var(--adsgram-text-color);content:"";inset:0;opacity:.2;position:absolute}._progress_1b8xb_25{background-color:var(--adsgram-button-color);border-radius:var(--xxxs-spacing);height:100%;opacity:1;width:0}',Ws='._timer_1kqy0_1{padding:0 var(--xs-spacing);position:relative;width:fit-content;z-index:1}._timer_1kqy0_1:before{background:var(--adsgram-section-bg-color);border-radius:var(--s-spacing);content:"";inset:0;position:absolute;z-index:-1}._time_1kqy0_1{color:var(--adsgram-text-color);font-size:var(--text-s);font-weight:var(--font-medium);line-height:23px;text-align:center;vertical-align:top}',$s="._banner_1fyti_1{align-items:center;background:var(--adsgram-secondary-bg-color);display:flex;flex-direction:column;height:100%;justify-content:space-between;left:0;overflow-y:scroll;position:fixed;top:0;width:100%}._banner_1fyti_1::-webkit-scrollbar{display:none}._preview_1fyti_19{position:static}._wrapper_1fyti_23{display:flex;flex-direction:column;height:100%;margin:calc(var(--xs-spacing) + var(--adsgram-content-safe-area-top, 0px) + var(--adsgram-safe-area-top, 0px)) calc(var(--m-spacing) + var(--adsgram-content-safe-area-right, 0px) + var(--adsgram-safe-area-right, 0px)) calc(var(--adsgram-content-safe-area-bottom, 0px) + var(--adsgram-safe-area-bottom, 0px)) calc(var(--m-spacing) + var(--adsgram-content-safe-area-left, 0px) + var(--adsgram-safe-area-left, 0px))}._wrapper_1fyti_23._fullscreen_1fyti_45{margin-top:calc(var(--xs-spacing) + var(--adsgram-safe-area-top, 0px))}._timer-wrapper_1fyti_49{align-items:flex-start;height:var(--adsgram-content-safe-area-top);margin-top:4px}._desktop_1fyti_58,._timer-wrapper_1fyti_49{display:flex;justify-content:center;width:100%}._desktop_1fyti_58{align-items:center;background-color:var(--adsgram-secondary-bg-color);height:100%;left:0;padding:var(--m-spacing) 0;position:fixed;top:0}._desktop_1fyti_58 ._banner_1fyti_1{border-radius:32px;box-shadow:4px 4px 30px #50a8eb1a;max-height:694px;position:relative;width:360px}._desktop_1fyti_58._light_1fyti_79 ._banner_1fyti_1{box-shadow:4px 4px 20px #50a8eb33}._desktop_1fyti_58 ._wrapper_1fyti_23{margin:16px 16px 0}";const qs='._button_1u3uw_1{animation-duration:.3s;animation-fill-mode:forwards;animation-name:_show_1u3uw_1;animation-timing-function:cubic-bezier(.05,.7,.1,1);background-color:transparent;border-radius:var(--xs-spacing);box-shadow:1px 1px 3px #0003;color:var(--adsgram-button-text-color);cursor:pointer;font-size:var(--text-l);font-weight:var(--font-medium);height:48px;left:50%;line-height:24px;overflow:hidden;padding:12px 24px;position:absolute;transform:translate(-50%);white-space:nowrap;z-index:3}._button_1u3uw_1:before{background:var(--adsgram-button-color);border:1px solid transparent;border-radius:7px;content:"";inset:0;position:absolute;z-index:-2}@keyframes _show_1u3uw_1{0%{bottom:10px;opacity:0}to{bottom:30px;opacity:1}}._visible_1u3uw_46{animation-play-state:running;visibility:visible}._hidden_1u3uw_51{animation-play-state:paused;visibility:hidden}@keyframes _shine_1u3uw_70{0%{left:-100%}33.33%{left:100%}to{left:100%}}._button_1u3uw_1._shine_1u3uw_70:after{animation:_shine_1u3uw_70 2s ease-in-out infinite;animation-delay:2s;background:linear-gradient(90deg,#fff0,#ffffff73 19.79%,#fff9,#ffffff73 32.29%,#fff0 50%);background-blend-mode:soft-light;content:"";height:100%;left:-100%;opacity:.8;position:absolute;top:0;width:100%;z-index:-1}',Hs="._wrapper_14j31_1{cursor:pointer;display:flex;flex-direction:column;font-size:var(--text-s);font-weight:var(--font-normal);height:100%;letter-spacing:0;line-height:16px;margin:10px 0;text-align:center;width:100%}._adlabel_14j31_15,._adlabeltext_14j31_15{color:#fff9}._adlabel_14j31_15{align-items:center;display:flex;font-size:var(--text-s);font-weight:var(--font-normal);letter-spacing:0;line-height:16px}._tgchannel_14j31_29{color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",Xs="._close_cli9a_1{aspect-ratio:1/1;display:flex;flex-wrap:wrap;height:100%;place-content:center center}._close_cli9a_1._clickable_cli9a_9{cursor:pointer}._image_cli9a_13{fill:#999;opacity:.36;transition:.15s ease-out}._close_cli9a_1._clickable_cli9a_9 ._image_cli9a_13{fill:#fff;opacity:1}",Gs="._header-wrapper_1lfc1_1{background:linear-gradient(rgba(0,0,0,.35),transparent);padding-top:var(--xs-spacing);position:absolute;top:0;width:100%;z-index:3}._header_1lfc1_1{--adsgram-header-height:52px;display:flex;height:var(--adsgram-header-height);justify-content:space-between}._container_1lfc1_18{display:flex;width:var(--adsgram-header-height)}._expanded-header_1lfc1_23 ._container_1lfc1_18{width:calc(var(--adsgram-header-height)*2)}._label-container_1lfc1_27{display:flex;justify-content:center;width:calc(100% - var(--adsgram-header-height)*2)}._expanded-header_1lfc1_23 ._label-container_1lfc1_27{width:calc(100% - var(--adsgram-header-height)*4)}._preview_1lfc1_37{border-radius:8px 8px 0 0}._kebab_1lfc1_41{align-items:center;display:flex;height:var(--adsgram-header-height);justify-content:center;width:var(--adsgram-header-height)}._kebab-content_1lfc1_49{right:40px;top:10px}",Js="._packshot_1eu44_1{animation-duration:.2s;animation-name:_packshot_1eu44_1;animation-timing-function:cubic-bezier(0,0,0,1);-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background:#141414cc;display:flex;flex-wrap:wrap;height:100%;place-content:center center;position:absolute;top:0;width:100%}@supports ((-webkit-backdrop-filter:none) or (backdrop-filter:none)){._packshot_1eu44_1{-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background:#7474814d}}._creatives_1eu44_23{animation-duration:.4s;animation-name:_creatives_1eu44_23;animation-timing-function:cubic-bezier(.05,.7,.1,1);display:flex;flex-direction:column;place-content:center center;position:relative;transform:translateY(-26px);width:280px}._image_1eu44_35{border:1px solid rgb(0 0 0/4%);border-radius:20px;box-shadow:0 8px 20px #00000029;height:128px;margin:0 auto 20px;width:128px}._title_1eu44_44{color:#fff;font-size:28px;font-weight:700;letter-spacing:0;line-height:32px;margin:var(--xs-spacing);text-align:center}._description_1eu44_54{color:#fff9;font-size:16px;font-weight:var(--font-medium);letter-spacing:0;line-height:24px;text-align:center}._play_1eu44_63{animation-play-state:running;visibility:visible}._pause_1eu44_68{animation-play-state:paused;visibility:hidden}@keyframes _packshot_1eu44_1{0%{opacity:0}to{opacity:1}}@keyframes _creatives_1eu44_23{0%{opacity:0;top:40px}to{opacity:1;top:0}}",Ys="._wrapper_1vxac_1{height:calc(100% - var(--adsgram-content-safe-area-top, 0px) - var(--adsgram-safe-area-top, 0px) - var(--adsgram-content-safe-area-bottom, 0px) - var(--adsgram-safe-area-bottom, 0px));margin:calc(var(--adsgram-content-safe-area-top, 0px) + var(--adsgram-safe-area-top, 0px)) calc(var(--adsgram-content-safe-area-right, 0px) + var(--adsgram-safe-area-right, 0px)) calc(var(--adsgram-content-safe-area-bottom, 0px) + var(--adsgram-safe-area-bottom, 0px)) calc(var(--adsgram-content-safe-area-left, 0px) + var(--adsgram-safe-area-left, 0px));position:relative;width:calc(100% - var(--adsgram-content-safe-area-left, 0px) - var(--adsgram-safe-area-left, 0px) - var(--adsgram-content-safe-area-right, 0px) - var(--adsgram-safe-area-right, 0px))}._wrapper_1vxac_1._desktop_1vxac_33{border-radius:var(--m-spacing);box-shadow:.5px .5px 40px #0f1b2540;margin:0;max-height:596px;max-width:335px;overflow:hidden}",Zs=".rmp-container,.rmp-content,.rmp-video{height:100%;width:100%}.rmp-container{background-color:#000}",Ks="._point_m3ogu_1{background-color:#fff;border-radius:3px;height:6px;opacity:0;position:absolute;top:6px;width:6px}",Qs="._timeline_15aiu_1{align-content:center;display:flex;flex-wrap:wrap;height:18px;position:relative;width:100%}._bar_15aiu_10{background-color:#ffffff59;border-radius:var(--xxxs-spacing);height:2px;width:100%}._progress_15aiu_17{background-color:#fff;border-radius:var(--xxxs-spacing);height:100%;width:0}",ec="._volume_10n0w_1{aspect-ratio:1/1;cursor:pointer;display:flex;flex-wrap:wrap;height:100%;place-content:center center}",tc="._banner_jvd6s_1{background-color:#000;height:100%;left:0;position:fixed;top:0;width:100%}._banner_jvd6s_1._desktop_jvd6s_10{align-items:center;background-color:#151e27;display:flex;justify-content:center}._preview_jvd6s_17{background-color:#000;height:100%;position:absolute;width:100%}._preview_jvd6s_17 .rmp-container{border-radius:var(--xs-spacings)}";const nc="._kebab_witt2_1{cursor:pointer;display:flex;position:relative}._hidden_witt2_7{visibility:hidden}._icon_witt2_11{height:16px;width:16px;z-index:1}._icon_witt2_11._video-banner_witt2_17{filter:drop-shadow(1px 1px 1px rgb(0 0 0/15%));height:24px;width:24px}",rc="._wrapper_6je2u_1{background:var(--adsgram-secondary-bg-color);border-radius:var(--xxs-spacing);box-shadow:0 1px 3px 1px #0000001f;box-sizing:border-box;cursor:default;max-width:220px;padding:6px 16px;position:absolute;width:calc(100vw - 140px)}._legal-info_6je2u_15,._wrapper_6je2u_1{display:flex;flex-direction:column}",ic="._item_19dus_1{display:flex;flex-direction:column;gap:var(--xxxs-spacing);margin:var(--xs-spacing) 0;width:100%}._item_19dus_1 span{font-size:var(--text-xs);font-weight:var(--font-medium);line-height:14px}._header_19dus_15{color:var(--adsgram-subtitle-text-color,#82868a);white-space:nowrap}._content_19dus_20{color:var(--adsgram-text-color,#222)}",ac="._timeline-container_sdux2_1{display:flex;gap:var(--xs-spacing);padding-bottom:4px}._timeline-container_sdux2_1._video_sdux2_7{margin:auto var(--m-spacing);padding-bottom:0}",oc="*{border:none;margin:0;padding:0}*,:after,:before{box-sizing:border-box}a,a:hover,a:link,a:visited{text-decoration:none}button,input,select,textarea{background-color:transparent;color:inherit;font-family:inherit;font-size:inherit}:host{font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}",sc=":host{--xxxs-spacing:4px;--xxs-spacing:6px;--xs-spacing:8px;--s-spacing:12px;--m-spacing:16px;--text-xs:12px;--text-s:13px;--text-m:15px;--text-l:16px;--font-normal:400;--font-medium:500;--font-semibold:600}";function cc(e,t){let n=e.querySelector("style");n||(n=document.createElement("style"),e.append(n));const r=function(){const e=Object.assign({"/src/components/kebab/kebab.module.css":nc,"/src/components/kebab/kebabContet.module.css":rc,"/src/components/kebab/legalInfoItem.module.css":ic,"/src/components/timelineContainer/timelineContainer.module.css":ac,"/src/theme/reset.css":oc,"/src/theme/variables.css":sc});return Object.values(e).join("")}(),i=t===c.FullscreenMedia?function(){const e=Object.assign({"/src/banners/fullscreenMedia/components/adsgramLabel/adsgramLabel.module.css":Ds,"/src/banners/fullscreenMedia/components/channel/channel.module.css":Os,"/src/banners/fullscreenMedia/components/footer/footer.module.css":Bs,"/src/banners/fullscreenMedia/components/post/post.module.css":Us,"/src/banners/fullscreenMedia/components/postButton/postButton.module.css":Ms,"/src/banners/fullscreenMedia/components/postCloseButton/postCloseButton.module.css":js,"/src/banners/fullscreenMedia/components/postTimeline/postTimeline.module.css":zs,"/src/banners/fullscreenMedia/components/timer/timer.module.css":Ws,"/src/banners/fullscreenMedia/fullscreenMediaView.module.css":$s});return Object.values(e).join("")}():function(){const e=Object.assign({"/src/banners/rwvideo/components/actionButton/actionButton.module.css":qs,"/src/banners/rwvideo/components/adLabel/adLabel.module.css":Hs,"/src/banners/rwvideo/components/closeButton/closeButton.module.css":Xs,"/src/banners/rwvideo/components/header/header.module.css":Gs,"/src/banners/rwvideo/components/packshot/packshot.module.css":Js,"/src/banners/rwvideo/components/player/player.module.css":Ys,"/src/banners/rwvideo/components/playerInitContainer/playerInitContainer.css":Zs,"/src/banners/rwvideo/components/skipPoint/skipPoint.module.css":Ks,"/src/banners/rwvideo/components/timeline/timeline.module.css":Qs,"/src/banners/rwvideo/components/volume/volume.module.css":ec,"/src/banners/rwvideo/rwvideo.module.css":tc});return Object.values(e).join("")}();n.textContent=`${r}${i}`}class lc{_blockId;_debug;_debugBannerType;_container;_EventEmitter;_isShowing;_isLoading;_rewardTime;constructor({blockId:e,container:t,debug:n,debugBannerType:r}){this._blockId=e,this._debug=n,this._debugBannerType=r,this._container=t,this._EventEmitter=rr(),this._isShowing=!1,this._isLoading=!1,this._rewardTime=-1/0,this._subscribeToMakeFinalDestroy()}async show(){this._checkNonStopShow(),this._checkIsShowing();const e=await this._load();try{return this._isShowing=!0,await async function({blockId:e,container:t,data:n,EventEmitter:r}){const i=et();let a=0,o=0;const{shadowRoot:s,isFullscreen:c}=await Wn({blockId:e,data:n.banners[0],EventEmitter:r,initContainer:t,logger:i}),l=()=>{try{const t=n.banners[a];cc(s,t.bannerType),Sn(fi(Fs,{bannerType:t.bannerType,blockType:n.blockType,data:t,blockId:e,EventEmitter:r,logger:i,isFullscreen:c,adsProgress:{bannerIndex:a,numOfBanners:n.banners.length}}),s)}catch{i.add("blockId",e).add("bannerType",n.banners[a].bannerType).add("blockType",n.blockType).send("RenderError"),r.emit(zt.renderError)}},d=()=>{a<n.banners.length-1?(a+=1,o+=1,l()):r.emit(zt.sendReward)},u=()=>{a<n.banners.length-1?(a+=1,l()):o>0?r.emit(zt.sendReward):r.emit(zt.error)};r.on(zt.playerError,u),r.on(zt.showNextBanner,d),Xt(r,[()=>{r.off(zt.showNextBanner,d),r.off(zt.playerError,u)}],i),l()}({blockId:this._blockId,container:this._container,data:e,EventEmitter:this._EventEmitter}),new Promise(((e,t)=>{this._setShowResult(e,t)}))}catch{throw et().add("blockId",this._blockId).add("blockType",e.blockType).send("UnknownRenderError","WARN"),this._finalDestroy(),ne.renderError}}addEventListener(e,t){if(!(e in Wt)&&!(e in $t))throw new qe({message:`The event argument must be one of ${Object.keys(Wt).join(", ")}. Received ${e}`});this._EventEmitter.on(e,t)}removeEventListener(e,t){if(!(e in Wt)&&!(e in $t))throw new qe({message:`The event argument must be one of ${Object.keys(Wt).join(", ")}. Received ${e}`});this._EventEmitter.off(e,t)}destroy(){this._EventEmitter.emit(zt.destroy)}async _load(){if(this._isLoading)throw re("Attempt to call show when loading the banner.");return this._isLoading=!0,jt(this._blockId,this._forceCampaignId).then((e=>e)).catch((e=>{const t=i(e);throw e instanceof qe&&(e.code===r.onBannerNotFound&&this._invokeAlertOrEvent(Q(a),Wt.onBannerNotFound),t===Q(s)&&this._invokeAlertOrEvent(Q(s),Wt.onTooLongSession)),re(t)})).finally((()=>{this._isLoading=!1}))}_setShowResult(e,t){this._EventEmitter.on(zt.renderError,(()=>{this._EventEmitter.emit(Wt.onError),t(ne.renderError)}),{unsubscribeEvent:zt.finalDestroy}),this._EventEmitter.on(zt.error,(()=>{this._EventEmitter.emit(Wt.onError),t(ne.playError)}),{unsubscribeEvent:zt.finalDestroy}),this._EventEmitter.on(Wt.onSkip,(()=>{t(ne.skip)}),{unsubscribeEvent:zt.finalDestroy}),this._EventEmitter.on($t.onNotSuitable,(()=>{t(ne.notSuitable)}),{unsubscribeEvent:zt.finalDestroy}),this._EventEmitter.on(Wt.onReward,(()=>{this._rewardTime=Date.now(),e(ne.reward)}),{unsubscribeEvent:zt.finalDestroy}),this._EventEmitter.on(Wt.onComplete,(()=>{this._rewardTime=Date.now(),e(ne.complete)}),{unsubscribeEvent:zt.finalDestroy})}_invokeAlertOrEvent(e,t){this._EventEmitter.hasListeners(t)?this._EventEmitter.emit(t):$e({message:e})}_checkNonStopShow(){if(Date.now()-this._rewardTime<1e4)throw this._invokeAlertOrEvent(Q(o),Wt.onNonStopShow),ne.nonStopShowError}_checkIsShowing(){if(this._isShowing)throw ne.duplicateShowError}get _forceCampaignId(){return this._debug?ee[this._debugBannerType??te]:void 0}_finalDestroy(){this._EventEmitter.emit(zt.finalDestroy),this._resetVariables()}_subscribeToMakeFinalDestroy(){this._EventEmitter.on(zt.destroy,this._finalDestroy.bind(this)),this._EventEmitter.on(Wt.onReward,this._finalDestroy.bind(this)),this._EventEmitter.on($t.onNotSuitable,this._finalDestroy.bind(this)),this._EventEmitter.on(Wt.onComplete,this._finalDestroy.bind(this)),this._EventEmitter.on(Wt.onSkip,this._finalDestroy.bind(this)),this._EventEmitter.on(zt.error,this._finalDestroy.bind(this)),this._EventEmitter.on(zt.renderError,this._finalDestroy.bind(this))}_resetVariables(){this._isShowing=!1,this._EventEmitter.clearEmittedEvents()}}const dc={blockId:function(e){if(!("blockId"in e))throw new qe({message:"blockId is required param for init function"});if("string"!=typeof e.blockId)throw new qe({message:"blockId param should be string"});if(!/\d+$/.test(e.blockId))throw new qe({message:`blockId param should be string with number value inside, you pass ${e.blockId}`});if(/^\D/.test(e.blockId)){if(!d.some((t=>e.blockId.startsWith(t))))throw new qe({message:`blockId param have wrong prefix, you pass ${e.blockId}. Prefix could be ${d.join(", ")}`})}return!0},container:function(e){if("container"in e){if(e.container instanceof HTMLElement)return!0;throw new qe({message:`container should be instanceof HTMLElement you call with ${JSON.stringify(e.container)}`})}return!0},hasReward:function(e){if("hasReward"in e){if("boolean"!=typeof e.hasReward)throw new qe({message:`hasReward should be boolean you call with ${JSON.stringify(e.hasReward)}`});return!0}return!0},debug:function(e){if("debug"in e){if("boolean"!=typeof e.debug)throw new qe({message:`debug should be boolean you call with ${JSON.stringify(e.debug)}`});return!0}return!0},debugBannerType:function(e){if("debugBannerType"in e){if("string"!=typeof e.debugBannerType)throw new qe({message:`debugBannerType should be string you call with ${JSON.stringify(e.debugBannerType)}`});if(!Object.keys(ee).includes(e.debugBannerType))throw new qe({message:`debugBannerType should be one of ${Object.keys(ee)} you call with ${e.debugBannerType}`})}return!0}};function uc(e){return"string"==typeof e&&/^_[A-Za-z]/.test(e)}function pc(e){return new Proxy(e,{get(e,t){if("__proto__"===t)return function(e){const t=Object.getPrototypeOf(e);return new Proxy(t,{get(e,t){if(!uc(t))return Reflect.get(e,t)},has:(e,t)=>!uc(t)&&Reflect.has(e,t),ownKeys:e=>Reflect.ownKeys(e).filter((e=>!uc(e))),getOwnPropertyDescriptor(e,t){if(!uc(t))return Reflect.getOwnPropertyDescriptor(e,t)}})}(e);if(uc(t))return void et().add("method","get").add("property",t).send("HiddenPropertyAccess","WARN");const n=e[t];return"function"==typeof n?n.bind(e):n},set:(e,t,n)=>uc(t)?(et().add("method","set").add("property",t).send("HiddenPropertyAccess","WARN"),!1):(e[t]=n,!0),deleteProperty:(e,t)=>uc(t)?(et().add("method","delete").add("property",t).send("HiddenPropertyAccess","WARN"),!1):(delete e[t],!0),ownKeys:e=>Reflect.ownKeys(e).filter((e=>!uc(e))),getOwnPropertyDescriptor(e,t){if(!uc(t))return Reflect.getOwnPropertyDescriptor(e,t)}})}const _c={};function hc(e){if(!function(e){if("object"!=typeof e)throw new qe({message:`Object should be passed to the init function you pass ${JSON.stringify(e)}`});return!("object"!=typeof e||e instanceof Function||Array.isArray(e)||null===e)&&Object.values(dc).every((t=>t(e)))}(e))throw new qe({message:"Attempt to create AdController with wrong params"});const{blockId:t}=e;return _c[t]||(_c[t]=pc(new lc(e))),_c[t]}const mc='._task_1b03o_1{--adsgram-task-protected-font-size:max(14px,var(--adsgram-task-font-size,14px));--adsgram-task-protected-icon-size:max(30px,var(--adsgram-task-icon-size,30px));--adsgram-task-protected-button-width:max(40px,var(--adsgram-task-button-width,40px));--adsgram-task-protected-icon-title-gap:min(max(5px,var(--adsgram-task-icon-title-gap,5px)),40px);display:grid;font-size:var(--adsgram-task-protected-font-size);gap:0;grid-template:auto auto/calc(var(--adsgram-task-protected-icon-size) + var(--adsgram-task-protected-icon-title-gap)) 1fr var(--adsgram-task-protected-button-width);grid-template-areas:"icon title button" "icon reward button";min-height:30px;position:relative;width:100%}._task-kebab_1b03o_34{visibility:hidden}._icon_1b03o_38{aspect-ratio:1;border-radius:var(--adsgram-task-icon-border-radius,5px);grid-area:icon;height:var(--adsgram-task-protected-icon-size);margin-right:var(--adsgram-task-protected-icon-title-gap)}._icon-wrapper_1b03o_46{grid-area:icon}._button_1b03o_50{background-color:transparent;border:none;color:inherit;font-family:inherit;font-size:inherit;grid-area:button;margin:0;padding:0;width:var(--adsgram-task-protected-button-width)}._title_1b03o_62{grid-area:title;margin:0}._text_1b03o_67{padding-right:calc(.8em + 14px);white-space:wrap;word-break:break-word;word-wrap:normal}._kebab-icon_1b03o_74{height:.8em;opacity:.6;padding:10px;position:absolute;transform:translate(-100%,-8px);vertical-align:baseline;width:.8em}._kebab-content_1b03o_84{height:100%;left:0;position:absolute;top:0;visibility:visible;width:100%}._kebab-text_1b03o_93{font-size:12px;line-height:15px}._kebab-close_1b03o_98{float:right;padding:0 0 10px 10px}._reward_1b03o_103{grid-area:reward}._icon-skeleton_1b03o_107{grid-area:icon}._title-skeleton_1b03o_111{border-radius:3px;grid-area:title;height:1em;width:90%}._icon-skeleton_1b03o_107,._title-skeleton_1b03o_111{animation:_skeleton_1b03o_1 2s linear infinite;background-color:#9fa6ad}@keyframes _skeleton_1b03o_1{0%{background-color:#9fa6ad}50%{background-color:#c8ccd0}to{background-color:#9fa6ad}}';function fc({EventEmitter:e,initContainer:t,logger:n}){const r=function(e){if(!(e instanceof wc))throw new qe({message:"Container must be an adsgram-task custom element",shouldLog:!1});const t=e.attachShadow({mode:"open"}),n=document.createElement("style");return n.textContent=mc,t.append(n),t}(t);return Xt(e,[Vn(e),()=>{Sn(null,r)}],n),r}const gc=12e4;function bc(e){return!e||Date.now()-e.fetchTimestamp>gc}const vc={};function yc({blockId:e,logger:t,EventEmitter:n,debug:a,mock:o}){const l=vc[e],d=function({task:e,debug:t,mock:n,EventEmitter:a,logger:o,blockId:l}){const[d,u]=br(bc(e)),p=t?ee[c.RewardTask]:void 0;return vr((()=>{bc(e)&&jt(l,p).then((e=>{const t=e.banners[0];!function(e){return"RewardTask"===e.bannerType}(t)?o.add("campaignId",t.campaignId).send("NotTaskCampaign"):(vc[l]={data:t,fetchTimestamp:Date.now()},u(!1))})).catch((e=>{e instanceof qe&&(e.code===r.onBannerNotFound&&a.emit(Wt.onBannerNotFound),i(e)===Q(s)&&a.emit(Wt.onTooLongSession))}))}),[l,e,o,p,n,a]),d}({task:l,debug:a,mock:o,blockId:e,EventEmitter:n,logger:t}),{icon:u,title:p,url:_,kebab:h}=Rs(d?void 0:l?.data);return fi(As,{blockId:e,EventEmitter:n,logger:t,exp:Xn(l?.data?.banner?.flags),trackings:Ls(l?.data?.banner?.trackings),blockType:"TaskBlock",isFullscreen:!1,children:fi(Es,{icon:u,title:p,url:_,kebab:h})})}class wc extends HTMLElement{_EventEmitter;blockId;debug;constructor(){super(),this._EventEmitter=rr(),this.debug=!1}connectedCallback(){this.blockId=this.dataset.blockId,this.debug="true"===this.dataset.debug;const e=this.getAttribute("classname");e&&(this.setAttribute("class",e),this.removeAttribute("classname")),this._subscribe(),this._render()}disconnectedCallback(){this._EventEmitter.emit(zt.finalDestroy),this._unsubscribe()}attributeChangedCallback(e,t,n){"classname"===e&&"string"==typeof n&&""!==n.trim()&&(this.setAttribute("class",n),this.removeAttribute("classname"))}_render(){(function(e){if(null==e)throw new qe({message:"You should set data-block-id attribute to adsgram-task tag, get your blockId from https://partner.adsgram.ai/"});if("string"!=typeof e)throw new qe({message:"blockId param should be string"});if(!/^task-\d+$/.test(e))throw new qe({message:"blockId param should be in format task-X where X is decimal number"});return!0})(this.blockId)&&function({blockId:e,container:t,EventEmitter:n,debug:r,mock:i}){const a=et();a.add("blockId",e).add("bannerType","RewardTask").add("blockType","TaskBlock");const o=fc({EventEmitter:n,initContainer:t,logger:a});try{Sn(fi(yc,{blockId:e,EventEmitter:n,logger:a,debug:r,mock:i}),o)}catch(s){a.addError(s).send("RenderError"),n.emit(zt.renderError)}}({debug:this.debug,mock:!1,blockId:this.blockId,container:this,EventEmitter:this._EventEmitter})}_dispatchEvent(e){this.dispatchEvent(new CustomEvent(e,{detail:this.blockId,bubbles:!0,composed:!0})),vc[this.blockId]=void 0}_subscribe(){this._EventEmitter.on(zt.sendReward,this._dispatchEvent.bind(this,"reward")),this._EventEmitter.on(Wt.onBannerNotFound,this._dispatchEvent.bind(this,"onBannerNotFound")),this._EventEmitter.on(Wt.onTooLongSession,this._dispatchEvent.bind(this,"onTooLongSession"))}_unsubscribe(){this._EventEmitter.removeAllListeners()}static observedAttributes=["classname"]}function kc(e){return hc(e)}Dt().subscribe(),kc.version=t,customElements.get("adsgram-task")||customElements.define("adsgram-task",wc),window.Adsgram={...window.Adsgram,init:kc},e.init=kc,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
